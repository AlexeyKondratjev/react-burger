{"version":3,"sources":["components/App/App.module.css","components/ModalOverlay/ModalOverlay.module.css","pages/MainPage.module.css","components/Loader/Loader.module.css","components/ProfileForm/ProfileForm.module.css","components/AppHeader/AppHeader.jsx","components/ModalOverlay/ModalOverlay.jsx","components/Modal/Modal.jsx","components/IngredientDetails/IngredientDetails.jsx","components/ProtectedRoute/ProtectedRoute.jsx","utils/constants.js","utils/cookie.js","utils/api.js","services/actions/auth.js","pages/LoginPage.jsx","utils/types.js","components/Ingredient/Ingredient.jsx","components/Loader/LoaderSvg.js","components/Loader/Loader.jsx","services/actions/modal.js","components/BurgerIngredients/BurgerIngredients.jsx","services/actions/constructorIngredients.js","components/BurgerConstructorItem/BurgerConstructorItem.jsx","services/actions/orderData.js","components/BurgerConstructor/BurgerConstructor.jsx","pages/MainPage.jsx","pages/RegistrationPage.jsx","pages/ForgotPasswordPage.jsx","pages/ResetPasswordPage.jsx","components/Navigation/Navigation.jsx","components/ProfileForm/ProfileForm.jsx","pages/ProfilePage.jsx","pages/NotFoundPage.jsx","components/IngredientIcon/IngredientIcon.jsx","utils/utils.js","utils/interface.js","components/Order/Order.jsx","components/OrdersList/OrdersList.jsx","services/actions/webSocket.js","pages/OrdersPage.jsx","components/OrderStats/OrderStats.jsx","pages/FeedPage.jsx","services/actions/allIngredients.js","components/OrderInfo/OrderInfo.jsx","components/OrderDetails/OrderDetails.jsx","pages/OrderDetailsPage.jsx","components/App/App.jsx","services/middleware/webSocketMiddleware.js","services/reducers/allIngredients.js","services/reducers/constructorIngredients.js","services/reducers/orderData.js","services/reducers/auth.js","services/reducers/modal.js","services/reducers/webSocket.js","services/reducers/index.js","index.jsx","components/OrderStats/OrderStats.module.css","components/OrderDetails/OrderDetails.module.css","components/AppHeader/AppHeader.module.css","components/BurgerIngredients/BurgerIngredients.module.css","components/BurgerConstructor/BurgerConstructor.module.css","components/Navigation/Navigation.module.css","components/Order/Order.module.css","components/IngredientDetails/IngredientDetails.module.css","pages/NotFoundPage.module.css","components/Ingredient/Ingredient.module.css","pages/commonStyles.module.css","components/Modal/Modal.module.css","components/IngredientIcon/IngredientIcon.module.css","components/OrderInfo/OrderInfo.module.css","components/BurgerConstructorItem/BurgerConstructorItem.module.css","pages/ProfilePage.module.css","pages/OrdersPage.module.css","components/OrdersList/OrdersList.module.css","pages/FeedPage.module.css"],"names":["module","exports","AppHeader","location","useLocation","className","styles","header","content","list","to","exact","link","activeClassName","activeLink","type","pathname","personalCab","ModalOverlay","onClick","modalOverlayStyles","overlay","Modal","children","onClose","title","useEffect","closeByEsc","event","key","document","addEventListener","removeEventListener","ReactDOM","createPortal","modalStyles","modalContainer","titleButtonGroup","closeButton","getElementById","IngredientDetails","id","useParams","allIngredients","useSelector","store","ingredientData","find","item","_id","src","image_large","alt","name","image","propertiesList","propertiesListItem","calories","proteins","fat","carbohydrates","ProtectedRoute","onlyUnAuth","rest","user","auth","from","state","API_PATH_INGREDIENTS","API_PATH_ORDERS","API_PATH_AUTH_SIGNUP","API_PATH_AUTH_SIGNIN","API_PATH_AUTH_SIGNOUT","API_PATH_AUTH_USER","API_PATH_TOKEN_UPDATE","API_PATH_PASSWORD_FORGOT","API_PATH_PASSWORD_RESET","USE_IN_VIEW_OPTIONS","threshold","setCookie","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","deleteCookie","checkReponse","res","ok","json","then","err","Promise","reject","fetchWithRefresh","url","options","fetch","message","updateTokenRequest","accessToken","refreshToken","split","localStorage","setItem","console","log","headers","authorization","ingredientsId","method","body","JSON","stringify","ingredients","email","password","token","getItem","code","REGISTRATION_USER_REQUEST","REGISTRATION_USER_SUCCESS","REGISTRATION_USER_FAILED","LOGIN_USER_REQUEST","LOGIN_USER_SUCCESS","LOGIN_USER_FAILED","LOGOUT_USER_REQUEST","LOGOUT_USER_SUCCESS","LOGOUT_USER_FAILED","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","FORGOT_PASSWORD_FAILED","RESET_PASSWORD_REQUEST","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_FAILED","GET_USERDATA_REQUEST","GET_USERDATA_SUCCESS","GET_USERDATA_FAILED","REFRESH_USERDATA_REQUEST","REFRESH_USERDATA_SUCCESS","REFRESH_USERDATA_FAILED","UPDATE_TOKEN_REQUEST","UPDATE_TOKEN_SUCCESS","UPDATE_TOKEN_FAILED","registerUser","dispatch","signUpUserRequest","data","payload","catch","loginUser","signInUserRequest","logoutUser","signOutUserRequest","forgotPassword","forgotPasswordRequest","resetPassword","resetPasswordRequest","getUserData","getUserDataRequest","refreshUserData","refreshUserDataRequest","LoginPage","useDispatch","useState","emailValue","setEmailValue","passwordValue","setPasswordValue","commonStyles","main","container","form","onSubmit","e","preventDefault","placeholder","onChange","target","extraClass","htmlType","size","disabled","navigationBlock","navigationLink","PropTypes","string","number","Ingredient","bunItem","constructorIngredients","bun","stuffingItems","stuffing","counter","useMemo","forEach","useDrag","collect","monitor","opacity","isDragging","dragRef","background","ref","style","count","priceGroup","price","LoaderSvg","color","width","height","viewBox","xmlns","stroke","fill","fillRule","transform","strokeWidth","strokeOpacity","cx","cy","r","attributeName","dur","repeatCount","loaderSizes","small","medium","large","superLarge","Loader","wrapperStyleKey","SET_MODAL","RESET_MODAL","BurgerIngredients","React","current","setCurrent","allIngredientsRequest","getViewedIngredientData","useCallback","getFilteredIngredients","filterCondition","filter","map","useInView","bunListItemRef","bunListItemInView","sauceListItemRef","sauceListItemInView","mainListItemRef","mainListItemInView","inViewHandler","burgerIngredientsStyles","section","tabs","href","active","categoryList","ingredientsList","ADD_BUN_TO_CONSTRUCTOR","ADD_STUFFING_ELEMENT_TO_CONSTRUCTOR","DELETE_STUFFING_ELEMENT_FROM_CONSTRUCTOR","REORDER_STUFFING_ELEMENTS","CONSTRUCTOR_CLEANUP","BurgerConstructorItem","index","dndRef","useRef","useDrop","accept","hover","dragIndex","dropIndex","isHover","isOver","dropRef","burgerConstructorItemStyles","listItem","hoveredItem","text","thumbnail","handleClose","deleteItemHandle","GET_ORDER_DATA_REQUEST","GET_ORDER_DATA_SUCCESS","GET_ORDER_DATA_FAILED","getOrderData","getOrderDataRequest","BurgerConstructor","history","useHistory","totalPrice","Object","keys","length","reduce","sum","curr","drop","Math","random","toString","slice","chosenPositionsListScroll","burgerConstructorStyles","positionsList","hoveredList","lockedPosition","isLocked","chosenPositionsList","infoGroup","idArr","push","MainPage","DndProvider","backend","HTML5Backend","RegistrationPage","nameValue","setNameValue","ForgotPasswordPage","isPasswordRecoveryEmailReceived","ResetPasswordPage","isResetPasswordSuccess","resetCodeValue","setResetCodeValue","Navigation","navContainer","navigationLinkActive","switchNavigationFooterText","ProfileForm","loginValue","setLoginValue","onReset","icon","buttonGroup","ProfilePage","profileContainer","NotFoundPage","h1","p1","p2","IngredientIcon","ingredient","numberToRender","iconContainer","getOrderIngredients","ingredientsArr","allIngredientsArr","getOrderPrice","renderOrderStatus","status","statusDone","statusCancelled","Order","array","renderStatus","createdAt","orderIngredients","orderPrice","onOrderClick","groupIdDate","dateTimezoneOffset","date","getTimezoneOffset","groupImagesPrice","left","zIndex","groupPrice","toLocaleString","OrdersList","orders","ws","useRouteMatch","path","WS_CONNECTION_OPEN","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSE","WS_CONNECTION_DISCONNECT","WS_GET_MESSAGE","wsInitConnection","wsInitAuthConnection","wsCloseConnection","OrdersPage","wsConnected","ordersListContainer","OrderStats","total","totalToday","ordersStatusDone","ordersStatusPending","displayOrderNumber","ordersArray","isDone","orderDone","ordersBoard","groupList","groupTotal","glowText","FeedPage","GET_ALL_INGREDIENTS_REQUEST","GET_ALL_INGREDIENTS_SUCCESS","GET_ALL_INGREDIENTS_FAILED","getAllIngredients","getAllIngredientsRequest","success","items","OrderInfo","orderId","orderStatus","orderInfoMessage","OrderDetails","order","uniqueIngredients","Array","Set","idContainer","addBox","groupIngredientIcoName","footerContainer","OrderDetailsPage","includes","App","modal","isOpened","orderData","orderDataRequest","onOrderDetailsModalClose","appStyles","page","onIngredientModalClose","wsUrl","wsActions","initialState","allIngredientsFailed","registrationRequest","registrationFailed","registrationFailedMessage","loginRequest","loginFailed","loginFailedMessage","logoutRequest","logoutFailed","logoutFailedMessage","forgotPasswordFailed","forgotPasswordMessage","resetPasswordFailed","resetPasswordMessage","getUserDataFailed","getUserDataMessage","refreshUserDataFailed","refreshUserDataMessage","updateTokenFailed","updateTokenMessage","error","rootReducer","combineReducers","action","reorderStuffing","splice","removeItem","wsInit","wsOnOpen","wsOnError","wsOnClose","wsDisconnect","wsOnMessage","wsSendMessage","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","socket","isConnected","reconnectTimer","next","WebSocket","clearTimeout","close","onopen","onerror","onmessage","parsedData","parse","restParsedData","onclose","setTimeout","send","createStore","render","StrictMode"],"mappings":"iGACAA,EAAOC,QAAU,CAAC,KAAO,oB,oBCAzBD,EAAOC,QAAU,CAAC,QAAU,gC,oBCA5BD,EAAOC,QAAU,CAAC,KAAO,yB,oBCAzBD,EAAOC,QAAU,CAAC,WAAa,2BAA2B,MAAQ,sBAAsB,OAAS,uBAAuB,MAAQ,sBAAsB,mBAAqB,mCAAmC,cAAgB,8BAA8B,eAAiB,+BAA+B,cAAgB,gC,oBCA5TD,EAAOC,QAAU,CAAC,YAAc,mC,6KCgDjBC,MA5Cf,WACE,IAAMC,EAAWC,cAEjB,OACE,wBAAQC,UAAWC,IAAOC,OAAO,SAC/B,sBAAKF,UAAWC,IAAOE,QAAQ,UAE7B,8BACE,qBAAIH,UAAWC,IAAOG,KAAK,UACzB,oBAAIJ,UAAU,sBAAqB,SACjC,eAAC,IAAO,CAACK,GAAG,IAAIC,OAAO,EAAMN,UAAWC,IAAOM,KAAMC,gBAAiBP,IAAOQ,WAAW,UACtF,cAAC,aAAU,CAACC,KAA4B,MAAtBZ,EAASa,SAAmB,UAAY,cAC1D,mBAAGX,UAAU,mCAAkC,qFAGnD,oBAAIA,UAAU,sBAAqB,SACjC,eAAC,IAAO,CAACK,GAAG,QAAQL,UAAWC,IAAOM,KAAMC,gBAAiBP,IAAOQ,WAAW,UAC7E,cAAC,WAAQ,CAACC,KAA4B,UAAtBZ,EAASa,SAAuB,UAAY,cAC5D,mBAAGX,UAAU,mCAAkC,iGAMvD,cAAC,IAAI,CAACK,GAAG,IAAG,SACV,cAAC,OAAI,MAGP,qBAAKL,UAAWC,IAAOW,YAAY,SACjC,oBAAIZ,UAAWC,IAAOG,KAAK,SACzB,oBAAIJ,UAAU,sBAAqB,SACjC,eAAC,IAAO,CAACK,GAAG,WAAWL,UAAWC,IAAOM,KAAMC,gBAAiBP,IAAOQ,WAAW,UAChF,cAAC,cAAW,CAACC,KAA4B,aAAtBZ,EAASa,SAA0B,UAAY,cAClE,mBAAGX,UAAU,mCAAkC,4G,mCCjBhDa,MAff,SAAsB,GAAY,IAAXC,EAAO,EAAPA,QACrB,OACE,qBAAKd,UAAWe,IAAmBC,QAASF,QAASA,KC6C1CG,MA3Cf,SAAe,GAAoC,IAAlCC,EAAQ,EAARA,SAAUC,EAAO,EAAPA,QAAQ,EAAD,EAAEC,aAAK,MAAG,GAAE,EAgB5C,OAdAC,qBAAU,WACR,IAAMC,EAAa,SAACC,GACA,WAAdA,EAAMC,KACRL,KAMJ,OAFAM,SAASC,iBAAiB,UAAWJ,GAE9B,kBAAMG,SAASE,oBAAoB,UAAWL,MACpD,IAIIM,IAASC,aAEZ,qCACE,sBAAK7B,UAAW8B,IAAYC,eAAe,UACzC,sBAAK/B,UAAS,UAAK8B,IAAYE,iBAAgB,sBAAqB,UAClE,oBAAIhC,UAAU,4BAA2B,SAAEoB,IAC3C,wBAAQpB,UAAS,UAAK8B,IAAYG,aAAenB,QAASK,EAAQ,SAChE,cAAC,YAAS,CAACT,KAAK,iBAGnBQ,KAEH,cAAC,EAAY,CAACJ,QAASK,OAExBM,SAASS,eAAe,kB,wBCGhBC,MArCf,WACE,IAAQC,EAAOC,cAAPD,GACAE,EAAmBC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,kBAA9CA,eACFG,EAA+B,OAAdH,QAAc,IAAdA,OAAc,EAAdA,EAAgBI,MAAK,SAAAC,GAAI,OAAIA,EAAKC,MAAQR,KAEjE,OAAKK,EAKH,sBAAKzC,UAAWC,IAAOE,QAAQ,UAC7B,qBAAK0C,IAAKJ,EAAeK,YAAaC,IAAKN,EAAeO,KAAMhD,UAAWC,IAAOgD,QAClF,oBAAIjD,UAAU,kCAAiC,SAAEyC,EAAeO,OAEhE,qBAAIhD,UAAS,UAAKC,IAAOiD,eAAc,SAAQ,UAC7C,qBAAIlD,UAAS,UAAKC,IAAOkD,mBAAkB,SAAQ,UACjD,mBAAGnD,UAAU,kDAAiD,qFAC9D,mBAAGA,UAAU,oDAAmD,SAAEyC,EAAeW,cAEnF,qBAAIpD,UAAS,UAAKC,IAAOkD,mBAAkB,SAAQ,UACjD,mBAAGnD,UAAU,kDAAiD,uDAC9D,mBAAGA,UAAU,oDAAmD,SAAEyC,EAAeY,cAEnF,qBAAIrD,UAAS,UAAKC,IAAOkD,mBAAkB,SAAQ,UACjD,mBAAGnD,UAAU,kDAAiD,iDAC9D,mBAAGA,UAAU,oDAAmD,SAAEyC,EAAea,SAEnF,qBAAItD,UAAWC,IAAOkD,mBAAmB,UACvC,mBAAGnD,UAAU,kDAAiD,yEAC9D,mBAAGA,UAAU,oDAAmD,SAAEyC,EAAec,yBAvBhF,M,2CCNJ,SAASC,EAAe,GAAoC,IAAlCC,EAAU,EAAVA,WAAYvC,EAAQ,EAARA,SAAawC,EAAI,iBACpDC,EAASpB,aAAY,SAAAC,GAAK,OAAIA,EAAMoB,QAApCD,KACF7D,EAAWC,cAEjB,GAAI0D,GAAcE,EAAM,CACtB,IAAQE,GAAS/D,EAASgE,OAAS,CAAED,KAAM,CAAElD,SAAU,OAA/CkD,KAER,OACE,cAAC,IAAK,2BAAKH,GAAI,aACb,cAAC,IAAQ,CAACrD,GAAIwD,OAKpB,OAAKJ,GAAeE,EAQb,cAAC,IAAK,2BAAKD,GAAI,aACnBxC,KAPC,cAAC,IAAK,2BAAKwC,GAAI,aACb,cAAC,IAAQ,CAACrD,GAAI,CAAEM,SAAU,SAAUmD,MAAO,CAAED,KAAM/D,S,2CCvB9CiE,EAAuB,oDACvBC,EAAkB,+CAElBC,EAAuB,sDACvBC,EAAuB,mDACvBC,EAAwB,oDACxBC,EAAqB,kDAErBC,EAAwB,mDAExBC,EAA2B,uDAC3BC,EAA0B,6DAQ1BC,EAAsB,CAAEC,UAAW,ICnBzC,SAASC,EAAU1B,EAAM2B,EAAOC,GAErC,IAAIC,GADJD,EAAQA,GAAS,IACDE,QAEhB,GAAkB,iBAAPD,GAAmBA,EAAK,CACjC,IAAME,EAAI,IAAIC,KACdD,EAAEE,QAAQF,EAAEG,UAAkB,IAANL,GACxBA,EAAMD,EAAME,QAAUC,EAGpBF,GAAOA,EAAIM,cACbP,EAAME,QAAUD,EAAIM,eAItB,IAAIC,EAAgBpC,EAAO,KAD3B2B,EAAQU,mBAAmBV,IAG3B,IAAK,IAAMW,KAAYV,EAAO,CAC5BQ,GAAiB,KAAOE,EACxB,IAAMC,EAAYX,EAAMU,IAEN,IAAdC,IACFH,GAAiB,IAAMG,GAI3B9D,SAAS+D,OAASJ,EAGb,SAASK,EAAUzC,GACxB,IAAM0C,EAAUjE,SAAS+D,OAAOG,MAC9B,IAAIC,OAAO,WAAa5C,EAAK6C,QAAQ,+BAAgC,QAAU,aAGjF,OAAOH,EAAUI,mBAAmBJ,EAAQ,SAAMK,EAG7C,SAASC,EAAahD,GAC3B0B,EAAU1B,EAAM,KAAM,CAAE8B,SAAU,ICvBpC,IAAMmB,EAAe,SAACC,GACpB,OAAOA,EAAIC,GAAKD,EAAIE,OAASF,EAAIE,OAAOC,MAAK,SAACC,GAAG,OAAKC,QAAQC,OAAOF,OAGjEG,EAAgB,iDAAG,WAAOC,EAAKC,GAAO,kHAEtBC,MAAMF,EAAKC,GAAS,KAAD,EAA5B,OAAHT,EAAG,gBAEID,EAAaC,GAAK,KAAD,EAaG,KAAD,oCAbF,mCAEV,gBAAhB,KAAIW,QAAyB,kCACYC,KAAqB,KAAD,GAMnB,OANmB,SAAxDC,EAAW,EAAXA,YAAaC,EAAY,EAAZA,aAEpBtC,EAAU,QAASqC,EAAYE,MAAM,WAAW,IAChDC,aAAaC,QAAQ,eAAgBH,GACrCI,QAAQC,IAAI,kDAEZV,EAAQW,QAAQC,cAAgBR,EAAY,UAE1BH,MAAMF,EAAKC,GAAS,KAAD,GAA5B,OAAHT,EAAG,iBAEID,EAAaC,GAAI,iCAEvBK,QAAQC,OAAO,EAAD,KAAK,yDAG/B,gBAtBqB,wCAkCrB,sDATM,WAAmCgB,GAAa,2FACxCf,EAAiBzC,EAAiB,CAC7CyD,OAAQ,OACRH,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAY9B,EAAU,UAEvCiC,KAAMC,KAAKC,UAAU,CAAEC,YAAaL,MACpC,oFACH,sBAIA,sDAFM,wGACQf,EAAiB1C,GAAsB,KAAD,+EACpD,sBAUA,sDARM,WAAiC+D,EAAOC,EAAU/E,GAAI,2FAC9CyD,EAAiBxC,EAAsB,CAClDwD,OAAQ,OACRH,QAAS,CACP,eAAgB,oBAElBI,KAAMC,KAAKC,UAAU,CAAEE,MAAOA,EAAOC,SAAUA,EAAU/E,KAAMA,MAC9D,KAAD,+EACH,sBAUA,sDARM,WAAiC8E,EAAOC,GAAQ,2FACxCtB,EAAiBvC,EAAsB,CAClDuD,OAAQ,OACRH,QAAS,CACP,eAAgB,oBAElBI,KAAMC,KAAKC,UAAU,CAAEE,MAAOA,EAAOC,SAAUA,MAC9C,KAAD,+EACH,sBAUA,wDARM,wGACQtB,EAAiBtC,EAAuB,CACnDsD,OAAQ,OACRH,QAAS,CACP,eAAgB,oBAElBI,KAAMC,KAAKC,UAAU,CAAEI,MAAOd,aAAae,QAAQ,oBAClD,KAAD,+EACH,sBAUA,wDARM,WAAqCH,GAAK,2FAClCrB,EAAiBnC,EAA0B,CACtDmD,OAAQ,OACRH,QAAS,CACP,eAAgB,oBAElBI,KAAMC,KAAKC,UAAU,CAAEE,MAAOA,MAC7B,KAAD,+EACH,sBAUA,wDARM,WAAoCC,EAAUG,GAAI,2FAC1CzB,EAAiBlC,EAAyB,CACrDkD,OAAQ,OACRH,QAAS,CACP,eAAgB,oBAElBI,KAAMC,KAAKC,UAAU,CAAEG,SAAUA,EAAUC,MAAOE,MACjD,KAAD,+EACH,sBAUA,wDARM,wGACQzB,EAAiBrC,EAAoB,CAChDqD,OAAQ,MACRH,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAY9B,EAAU,YAEtC,KAAD,+EACH,sBAWA,wDATM,WAAsCqC,EAAO9E,EAAM+E,GAAQ,2FACnDtB,EAAiBrC,EAAoB,CAChDqD,OAAQ,QACRH,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAY9B,EAAU,UAEvCiC,KAAMC,KAAKC,UAAU,CAAE5E,KAAMA,EAAM8E,MAAOA,EAAOC,SAAUA,MAC1D,KAAD,+EACH,sBAEM,SAAejB,KAAkB,gCAQvC,wDARM,wGACQL,EAAiBpC,EAAuB,CACnDoD,OAAQ,OACRH,QAAS,CACP,eAAgB,oBAElBI,KAAMC,KAAKC,UAAU,CAAEI,MAAOd,aAAae,QAAQ,oBAClD,KAAD,+EACH,sBC/HM,IAAME,GAA4B,4BAC5BC,GAA4B,4BAC5BC,GAA2B,2BAE3BC,GAAqB,qBACrBC,GAAqB,qBACrBC,GAAoB,oBAEpBC,GAAsB,sBACtBC,GAAsB,sBACtBC,GAAqB,qBAErBC,GAA0B,0BAC1BC,GAA0B,0BAC1BC,GAAyB,yBAEzBC,GAAyB,yBACzBC,GAAyB,yBACzBC,GAAwB,wBAExBC,GAAuB,uBACvBC,GAAuB,uBACvBC,GAAsB,sBAEtBC,GAA2B,2BAC3BC,GAA2B,2BAC3BC,GAA0B,0BAE1BC,GAAuB,uBACvBC,GAAuB,uBACvBC,GAAsB,sBAE5B,SAASC,GAAa7B,EAAOC,EAAU/E,GAC5C,OAAO,SAAU4G,GACfA,EAAS,CAAElJ,KAAMyH,KDcd,SAAiC,EAAD,oCCZnC0B,CAAkB/B,EAAOC,EAAU/E,GAChCqD,MAAK,SAAAyD,GAAI,OAAIF,EAAS,CAAElJ,KAAM0H,GAA2B2B,QAASD,OAClEE,OAAM,SAAA1D,GAAG,OAAIsD,EAAS,CAAElJ,KAAM2H,GAA0B0B,QAASzD,QAIjE,SAAS2D,GAAUnC,EAAOC,GAC/B,OAAO,SAAU6B,GACfA,EAAS,CAAElJ,KAAM4H,KDcd,SAAiC,EAAD,kCCZnC4B,CAAkBpC,EAAOC,GACtB1B,MAAK,SAAAyD,GAAI,OAAIF,EAAS,CAAElJ,KAAM6H,GAAoBwB,QAASD,OAC3DE,OAAM,SAAA1D,GAAG,OAAIsD,EAAS,CAAElJ,KAAM8H,GAAmBuB,QAASzD,QAI1D,SAAS6D,KACd,OAAO,SAAUP,GACfA,EAAS,CAAElJ,KAAM+H,KDcd,WAAiC,gCCZpC2B,GACG/D,MAAK,SAAAyD,GAAI,OAAIF,EAAS,CAAElJ,KAAMgI,GAAqBqB,QAASD,OAC5DE,OAAM,SAAA1D,GAAG,OAAIsD,EAAS,CAAElJ,KAAMiI,GAAoBoB,QAASzD,QAI3D,SAAS+D,GAAevC,GAC7B,OAAO,SAAU8B,GACfA,EAAS,CAAElJ,KAAMkI,KDcd,SAAqC,GAAD,gCCZvC0B,CAAsBxC,GACnBzB,MAAK,SAAAyD,GAAI,OAAIF,EAAS,CAAElJ,KAAMmI,GAAyBkB,QAASD,OAChEE,OAAM,SAAA1D,GAAG,OAAIsD,EAAS,CAAElJ,KAAMoI,GAAwBiB,QAASzD,QAI/D,SAASiE,GAAcxC,EAAUG,GACtC,OAAO,SAAU0B,GACfA,EAAS,CAAElJ,KAAMqI,KDcd,SAAoC,EAAD,mCCZtCyB,CAAqBzC,EAAUG,GAC5B7B,MAAK,SAAAyD,GAAI,OAAIF,EAAS,CAAElJ,KAAMsI,GAAwBe,QAASD,OAC/DE,OAAM,SAAA1D,GAAG,OAAIsD,EAAS,CAAElJ,KAAMuI,GAAuBc,QAASzD,QAI9D,SAASmE,KACd,OAAO,SAAUb,GACfA,EAAS,CAAElJ,KAAMwI,KDcd,WAAiC,gCCZpCwB,GACGrE,MAAK,SAAAyD,GAAI,OAAIF,EAAS,CAAElJ,KAAMyI,GAAsBY,QAASD,OAC7DE,OAAM,SAAA1D,GAAG,OAAIsD,EAAS,CAAElJ,KAAM0I,GAAqBW,QAASzD,QAI5D,SAASqE,GAAgB7C,EAAO9E,EAAM+E,GAC3C,OAAO,SAAU6B,GACfA,EAAS,CAAElJ,KAAM2I,KDcd,SAAsC,EAAD,qCCZxCuB,CAAuB9C,EAAO9E,EAAM+E,GACjC1B,MAAK,SAAAyD,GAAI,OAAIF,EAAS,CAAElJ,KAAM4I,GAA0BS,QAASD,OACjEE,OAAM,SAAA1D,GAAG,OAAIsD,EAAS,CAAElJ,KAAM6I,GAAyBQ,QAASzD,QCpGhE,SAASuE,KACd,IAAMjB,EAAWkB,cAEjB,EAAoCC,mBAAS,IAAG,mBAAzCC,EAAU,KAAEC,EAAa,KAChC,EAA0CF,mBAAS,IAAG,mBAA/CG,EAAa,KAAEC,EAAgB,KAStC,OACE,sBAAMnL,UAAWoL,IAAaC,KAAK,SAEjC,sBAAKrL,UAAWoL,IAAaE,UAAU,UACrC,oBAAItL,UAAU,6BAA4B,sCAE1C,uBAAMA,UAAWoL,IAAaG,KAAMC,SAbrB,SAACC,GACpBA,EAAEC,iBAEF9B,EAASK,GAAUe,EAAYE,KAUgC,UACzD,cAAC,QAAK,CACJvG,MAAOqG,EACPtK,KAAM,QACNiL,YAAa,SACbC,SAAU,SAAAH,GAAC,OAAIR,EAAcQ,EAAEI,OAAOlH,QACtCmH,WAAW,cAEb,cAAC,gBAAa,CAACnH,MAAOuG,EAAeU,SAAU,SAAAH,GAAC,OAAIN,EAAiBM,EAAEI,OAAOlH,UAC9E,cAAC,SAAM,CACLoH,SAAS,SACTrL,KAAK,UACLsL,KAAK,SACLF,WAAW,aACXG,UAAWjB,IAAeE,EAAc,+CAK5C,qBAAKlL,UAAS,UAAKoL,IAAac,gBAAe,SAAQ,SACrD,oBAAGlM,UAAU,kDAAiD,qIACnC,cAAC,IAAI,CAACK,GAAG,YAAYL,UAAWoL,IAAae,eAAe,+HAIzF,qBAAKnM,UAAS,UAAKoL,IAAac,iBAAkB,SAChD,oBAAGlM,UAAU,kDAAiD,wFAC7C,cAAC,IAAI,CAACA,UAAWoL,IAAae,eAAgB9L,GAAG,mBAAkB,qI,yFCpDpF+L,KAAUC,OACTD,KAAUE,OACVF,KAAUC,OACJD,KAAUC,OACbD,KAAUE,OACVF,KAAUE,OACfF,KAAUE,OACAF,KAAUE,O,QC8DdC,OA7Df,SAAoB,GAAoB,IAAlBzC,EAAI,EAAJA,KAAMhJ,EAAO,EAAPA,QACpBhB,EAAWC,cAEXyM,EAAUjK,aAAY,SAAAC,GAAK,OAAIA,EAAMiK,uBAAuBC,OAC5DC,EAAgBpK,aAAY,SAAAC,GAAK,OAAIA,EAAMiK,uBAAuBG,YAElEC,EAAUC,mBAAQ,kBACtB,WACE,IAAI5G,EAAM,EAYV,MAVkB,QAAd4D,EAAKpJ,KACH8L,EAAQ5J,MAAQkH,EAAKlH,MACvBsD,EAAM,GAGRyG,EAAcI,SAAQ,SAAApK,GAChBA,EAAKC,MAAQkH,EAAKlH,KAAKsD,OAIxBA,KACN,CAACsG,EAASG,IAEf,EAA+BK,aAAQ,CACrCtM,KAAM,cACNiC,KAAMmH,EACNmD,QAAS,SAACC,GAAO,MAAM,CACrBC,QAASD,EAAQE,aAAe,GAAM,MAExC,mBANOD,EAAO,KAAPA,QAAWE,EAAO,KAU3B,OACE,cAAC,IAAI,CAAChN,GAAI,CAAEM,SAAS,gBAAD,OAAkBmJ,EAAKlH,KAAOkB,MAAO,CAAEwJ,WAAYxN,IAAcE,UAAWC,KAAOM,KAAK,SAC1G,qBACEP,UAAS,UAAKC,KAAOE,QAAO,SAC5BW,QAASA,EACTyM,IAAKF,EACLG,MAAO,CAAEL,WAAU,UAEH,IAAdN,KAAoB,cAAC,UAAO,CAACY,MAAOZ,IAAWb,KAAK,YACtD,qBAAKnJ,IAAKiH,EAAK7G,MAAOF,IAAK+G,EAAK9G,KAAMhD,UAAWC,KAAOgD,QAExD,sBAAKjD,UAAS,UAAKC,KAAOyN,WAAU,cAAa,UAC/C,mBAAG1N,UAAU,qCAAoC,SAAE8J,EAAK6D,QACxD,cAAC,eAAY,CAACjN,KAAK,eAGrB,mBAAGV,UAAU,8BAA6B,SAAE8J,EAAK9G,a,qBC5D5C4K,GAAY,SAAH,GAAqC,IAAD,IAA9BC,aAAK,MAAG,UAAS,EAAE7B,EAAI,EAAJA,KAC7C,OACE,qBACE8B,MAAO9B,EACP+B,OAAQ/B,EACRgC,QAAQ,YACRC,MAAM,6BACNC,OAAQL,EAAM,SAEd,mBAAGM,KAAK,OAAOC,SAAS,UAAS,SAC/B,oBAAGC,UAAU,iBAAiBC,YAAY,IAAG,UAC3C,wBAAQC,cAAc,KAAKC,GAAG,KAAKC,GAAG,KAAKC,EAAE,OAC7C,sBAAM3J,EAAE,8BAA6B,SACnC,kCACE4J,cAAc,YACdjO,KAAK,SACLmD,KAAK,UACLxD,GAAG,YACHuO,IAAI,KACJC,YAAY,yBCfpBC,GAAc,CAClBC,MAAO,GACPC,OAAQ,GACRC,MAAO,GACPC,WAAY,KAqBCC,GAjBA,SAAH,GAAkB,IAAZnD,EAAI,EAAJA,KAEVoD,EAAkB,WAAapD,EAErC,OACE,qBAAKhM,UAAWwN,KAAM4B,GAAiB,SACrC,cAAC,GAAS,CAACvB,MALK,UAKe7B,KAAM8C,GAAY9C,Q,SClB1CqD,GAAY,YACZC,GAAc,cC+GZC,OApGf,WACE,IAAM3F,EAAWkB,cAEjB,EAA8B0E,IAAMzE,SAAS,UAAS,mBAA/C0E,EAAO,KAAEC,EAAU,KAC1B,EAAkDnN,aAAY,SAAAC,GAAK,OAAIA,EAAMF,kBAArEA,EAAc,EAAdA,eAAgBqN,EAAqB,EAArBA,sBAElBC,EAA0BC,uBAAY,WAC1CjG,EAAS,CAAElJ,KAAM2O,GAAWtF,QAAS,CAAE5J,QAAS,kBAC/C,CAACyJ,IAEEkG,EAAyB,SAAChG,EAAMiG,GAGpC,OAFiBjG,EAAKkG,QAAO,SAAArN,GAAI,OAAIA,EAAKjC,OAASqP,KAEnCE,KAAI,SAAAtN,GAAI,OACtB,cAAC,GAAU,CACTmH,KAAMnH,EAEN7B,QAAS,WAAQ8O,MADZjN,EAAKC,SAMhB,EAA4CsN,aAAU1L,GAAoB,mBAAnE2L,EAAc,KAAEC,EAAiB,KACxC,EAAgDF,aAAU1L,GAAoB,mBAAvE6L,EAAgB,KAAEC,EAAmB,KAC5C,EAA8CJ,aAAU1L,GAAoB,mBAArE+L,EAAe,KAAEC,EAAkB,KAyB1C,OAJAnP,qBAAU,YAnBY,WACpB,QAAQ,GACN,KAAK+O,EACHV,EAAW,UACX,MAEF,KAAKY,EACHZ,EAAW,YACX,MAEF,KAAKc,EACHd,EAAW,YASfe,KACC,CAACL,EAAmBE,EAAqBE,IAG1C,0BAASxQ,UAAW0Q,KAAwBC,QAAQ,UAElD,oBAAI3Q,UAAU,kCAAiC,mGAE/C,sBAAKA,UAAS,UAAK0Q,KAAwBE,KAAI,eAAc,UAC3D,mBAAGC,KAAK,eAAe7Q,UAAW0Q,KAAwBnQ,KAAK,SAC7D,cAAC,MAAG,CAACoE,MAAM,SAASmM,OAAoB,WAAZrB,EAAsB3O,QAAS4O,EAAW,8CAIxE,mBAAGmB,KAAK,iBAAiB7Q,UAAW0Q,KAAwBnQ,KAAK,SAC/D,cAAC,MAAG,CAACoE,MAAM,WAAWmM,OAAoB,aAAZrB,EAAwB3O,QAAS4O,EAAW,8CAI5E,mBAAGmB,KAAK,gBAAgB7Q,UAAW0Q,KAAwBnQ,KAAK,SAC9D,cAAC,MAAG,CAACoE,MAAM,UAAUmM,OAAoB,YAAZrB,EAAuB3O,QAAS4O,EAAW,6DAM3EC,EAAyB,cAAC,GAAM,CAAC3D,KAAK,eAEnC,qBAAIhM,UAAW0Q,KAAwBK,aAAa,UAClD,qBAAI3O,GAAG,cAAcmL,IAAK4C,EAAe,UACvC,oBAAInQ,UAAU,6BAA4B,4CAC1C,oBAAIA,UAAS,UAAK0Q,KAAwBM,gBAAe,eAAc,SACpElB,EAAuBxN,EAAgB,YAG5C,qBAAIF,GAAG,gBAAgBmL,IAAK8C,EAAiB,UAC3C,oBAAIrQ,UAAU,6BAA4B,4CAC1C,oBAAIA,UAAS,UAAK0Q,KAAwBM,gBAAe,eAAc,SACpElB,EAAuBxN,EAAgB,cAG5C,qBAAIF,GAAG,eAAemL,IAAKgD,EAAgB,UACzC,oBAAIvQ,UAAU,6BAA4B,wDAC1C,oBAAIA,UAAS,UAAK0Q,KAAwBM,gBAAe,eAAc,SACpElB,EAAuBxN,EAAgB,oB,2DCtG3C2O,GAAyB,yBACzBC,GAAsC,sCACtCC,GAA2C,2CAC3CC,GAA4B,4BAC5BC,GAAsB,sBCqEpBC,OA3Df,SAA+B,GAAkB,IAAhBxH,EAAI,EAAJA,KAAMyH,EAAK,EAALA,MAC/B3H,EAAWkB,cAET1I,EAAO0H,EAAP1H,GACFoP,EAASC,iBAAO,MAMtB,EAA+BzE,aAAQ,CACrCtM,KAAM,aACNiC,KAAM,CAAEP,KAAImP,SACZtE,QAAS,SAACC,GAAO,MAAM,CACrBC,QAASD,EAAQE,aAAe,GAAM,MAExC,mBANOD,EAAO,KAAPA,QAAWE,EAAO,KAQ3B,EAA+BqE,aAAQ,CACrCC,OAAQ,aACRC,MAAK,SAAC9H,GACJ,GAAK0H,EAAO/B,QAAZ,CAEA,IAAMoC,EAAY/H,EAAKyH,MACjBO,EAAYP,EAElB3H,EAAS,CAAElJ,KAAM0Q,GAA2BS,YAAWC,cAEvDhI,EAAKyH,MAAQO,IAEf7E,QAAS,SAACC,GAAO,MAAM,CACrB6E,QAAS7E,EAAQ8E,aAEnB,mBAfOD,EAAO,KAAPA,QAqBT,OAJA1E,GAAQ4E,EAjBmB,MAiBXT,IAKd,qBAAIxR,UAAS,UAAKkS,KAA4BC,SAAQ,YAAIJ,EAAUG,KAA4BE,YAAc,GAAE,cAC9G7E,IAAKiE,EACLhE,MAAO,CAACL,WAAS,UAEjB,cAAC,WAAQ,CAACzM,KAAK,YACf,cAAC,qBAAkB,CAAC2R,KAAMvI,EAAK9G,KAAM2K,MAAO7D,EAAK6D,MAAO2E,UAAWxI,EAAK7G,MAAOsP,YAAa,kBAvCvE,SAACnQ,GACxBwH,EAAS,CAAElJ,KAAMyQ,GAA0C/O,OAsCyCoQ,CAAiBpQ,UCzD5GqQ,GAAyB,yBACzBC,GAAyB,yBACzBC,GAAwB,wBAG9B,SAASC,GAAapL,GAC3B,OAAO,SAAUoC,GACfA,EAAS,CAAElJ,KAAM+R,KXmCd,SAAmC,GAAD,+BWjCrCI,CAAoBrL,GACjBnB,MAAK,SAAAyD,GAAI,OACRF,EAAS,CACPlJ,KAAMgS,GACN3I,QAASD,OAEZE,OAAM,SAAA1D,GACLc,QAAQC,IAAIf,GACZsD,EAAS,CAAElJ,KAAMiS,SC+GVG,OAlHf,WACE,IAAMlJ,EAAWkB,cACXiI,EAAUC,cAERrP,EAASpB,aAAY,SAAAC,GAAK,OAAIA,EAAMoB,QAApCD,KAEF6I,EAAUjK,aAAY,SAAAC,GAAK,OAAIA,EAAMiK,uBAAuBC,OAC5DC,EAAgBpK,aAAY,SAAAC,GAAK,OAAIA,EAAMiK,uBAAuBG,YAClEpF,EAAgBsF,mBACpB,iBAAM,CAACN,GAAO,oBAAKG,GAAa,CAAEH,IAASyD,KAAI,SAAAtN,GAAI,OAAIA,EAAOA,EAAKC,IAAM,QACzE,CAAC4J,EAASG,IAYNsG,EAAanG,mBAAQ,WACzB,OACGoG,OAAOC,KAAK3G,GAAS4G,OAAS,EAAoB,EAAhB5G,EAAQmB,MAAY,GACvDhB,EAAc0G,QAAO,SAACC,EAAKC,GAAI,OAAKD,EAAMC,EAAK5F,QAAO,KAEvD,CAACnB,EAASG,IAEb,EAA+B+E,aAAQ,CACrCC,OAAQ,cACR6B,KAAI,SAAC7Q,GACW,QAAdA,EAAKjC,KACDkJ,EAAS,CAAElJ,KAAMuQ,GAAwBlH,QAASpH,IAClDiH,EAAS,CACTlJ,KAAMwQ,GACNnH,QAAQ,2BACHpH,GAAI,IACPP,GAAIqR,KAAKC,SAASC,WAAWC,MAAM,QAI3C3G,QAAS,SAACC,GAAO,MAAM,CACrB6E,QAAS7E,EAAQ8E,aAEnB,mBAhBOD,EAAO,KAAPA,QAAWE,EAAO,KAkBrB4B,EAA4BlH,GAAkBA,EAAcyG,QAAU,EAC1E,uCACA,uCAIF,OACE,sBAAKpT,UAAS,UAAK8T,KAAwBnD,QAAO,UAAS,UAEzD,qBACE3Q,UAAS,UAAK8T,KAAwBC,cAAa,YAAIhC,EAAU+B,KAAwBE,YAAc,IACvGzG,IAAK0E,EAAQ,UAGb,oBAAIjS,UAAS,UAAK8T,KAAwBG,eAAc,mBAAkB,SACvEf,OAAOC,KAAK3G,GAAS4G,OAAS,GAC7B,cAAC,qBAAkB,CAEjB1S,KAAK,MACLwT,UAAU,EACV7B,KAAI,UAAK7F,EAAQxJ,KAAI,+BACrB2K,MAAOnB,EAAQmB,MACf2E,UAAW9F,EAAQvJ,OALduJ,EAAQ5J,OAQnB,6BACE,oBAAI5C,UAAS,UAAK8T,KAAwBK,oBAAmB,YAAIL,KAAwBD,IAA6B,SACnHlH,GAAiBA,EAAcsD,KAAI,SAACtN,EAAM4O,GAAK,OAC9C,cAAC,GAAqB,CAACzH,KAAMnH,EAAM4O,MAAOA,GAAY5O,EAAKP,WAKjE,oBAAIpC,UAAS,UAAK8T,KAAwBG,eAAc,mBAAkB,SACvEf,OAAOC,KAAK3G,GAAS4G,OAAS,GAC7B,cAAC,qBAAkB,CAEjB1S,KAAK,SACLwT,UAAU,EACV7B,KAAI,UAAK7F,EAAQxJ,KAAI,yBACrB2K,MAAOnB,EAAQmB,MACf2E,UAAW9F,EAAQvJ,OALduJ,EAAQ5J,UAWrB,sBAAK5C,UAAS,UAAK8T,KAAwBM,UAAS,eAAc,UAChE,sBAAKpU,UAAS,UAAK8T,KAAwBpG,WAAU,UAAS,UAC5D,mBAAG1N,UAAU,oCAAmC,SAAEiT,IAClD,cAAC,eAAY,CAACvS,KAAK,eAGrB,cAAC,SAAM,CACLqL,SAAS,SACTrL,KAAK,UACLsL,KAAK,QACLC,WAAWiH,OAAOC,KAAK3G,GAAS4G,OAAS,EAAMF,OAAOC,KAAKxG,GAAeyG,OAAS,GACnFtS,QAAS,WA5Fe,IAACuT,IA4FgB7M,EA3F1C7D,GAGHiG,EAASgJ,GAAayB,IACtBzK,EAAS,CAAElJ,KAAM2O,GAAWtF,QAAS,CAAE5J,QAAS,gBAHhD4S,EAAQuB,KAAK,WA0FiD,oG,oBCjH7D,SAASC,KACd,OACE,cAACC,GAAA,EAAW,CAACC,QAASC,KAAa,SACjC,uBAAM1U,UAAWC,KAAOoL,KAAK,UAC3B,cAAC,GAAiB,IAClB,cAAC,GAAiB,SCJnB,SAASsJ,KACd,IAAM/K,EAAWkB,cAEjB,EAAkCC,mBAAS,IAAG,mBAAvC6J,EAAS,KAAEC,EAAY,KAC9B,EAAoC9J,mBAAS,IAAG,mBAAzCC,EAAU,KAAEC,EAAa,KAChC,EAA0CF,mBAAS,IAAG,mBAA/CG,EAAa,KAAEC,EAAgB,KAQtC,OACE,sBAAMnL,UAAWoL,IAAaC,KAAK,SAEjC,sBAAKrL,UAAWoL,IAAaE,UAAU,UACrC,oBAAItL,UAAU,6BAA4B,gFAE1C,uBAAMA,UAAWoL,IAAaG,KAAMC,SAZrB,SAACC,GACpBA,EAAEC,iBAEF9B,EAASD,GAAaqB,EAAYE,EAAe0J,KASc,UACzD,cAAC,QAAK,CACJjQ,MAAOiQ,EACPlU,KAAM,OACNiL,YAAa,qBACbC,SAAU,SAAAH,GAAC,OAAIoJ,EAAapJ,EAAEI,OAAOlH,QACrCmH,WAAW,SAEb,cAAC,QAAK,CACJnH,MAAOqG,EACPtK,KAAM,QACNiL,YAAa,SACbC,SAAU,SAAAH,GAAC,OAAIR,EAAcQ,EAAEI,OAAOlH,QACtCmH,WAAW,cAEb,cAAC,gBAAa,CAACnH,MAAOuG,EAAeU,SAAU,SAAAH,GAAC,OAAIN,EAAiBM,EAAEI,OAAOlH,UAC9E,cAAC,SAAM,CACLoH,SAAS,SACTrL,KAAK,UACLsL,KAAK,SACLF,WAAW,aACXG,UAAW2I,IAAc5J,IAAeE,EAAc,6HAK1D,qBAAKlL,UAAS,UAAKoL,IAAac,gBAAe,SAAQ,SACrD,oBAAGlM,UAAU,kDAAiD,kIACtC,cAAC,IAAI,CAACK,GAAG,SAASL,UAAWoL,IAAae,eAAe,sDChDpF,SAAS2I,KACd,IAAMlL,EAAWkB,cACXhL,EAAWC,cAETgV,EAAoCxS,aAAY,SAAAC,GAAK,OAAIA,EAAMoB,QAA/DmR,gCAER,EAAoChK,mBAAS,IAAG,mBAAzCC,EAAU,KAAEC,EAAa,KAQ/B,OAAI8J,EACM,cAAC,IAAQ,CAAC1U,GAAI,CAAEM,SAAU,kBAAmBmD,MAAO,CAACD,KAAM/D,MAIpE,sBAAME,UAAWoL,IAAaC,KAAK,SAEjC,sBAAKrL,UAAWoL,IAAaE,UAAU,UACrC,oBAAItL,UAAU,6BAA4B,uIAE1C,uBAAMA,UAAWoL,IAAaG,KAAMC,SAhBrB,SAACC,GACpBA,EAAEC,iBAEF9B,EAASS,GAAeW,KAauC,UACzD,cAAC,QAAK,CACJrG,MAAOqG,EACPtK,KAAM,QACNiL,YAAa,oDACbC,SAAU,SAAAH,GAAC,OAAIR,EAAcQ,EAAEI,OAAOlH,QACtCmH,WAAW,SAEb,cAAC,SAAM,CACLC,SAAS,SACTrL,KAAK,UACLsL,KAAK,SACLF,WAAW,aACXG,UAAWjB,EAAW,yFAK1B,qBAAKhL,UAAS,UAAKoL,IAAac,gBAAe,SAAQ,SACrD,oBAAGlM,UAAU,kDAAiD,0GAC1C,cAAC,IAAI,CAACK,GAAG,SAASL,UAAWoL,IAAae,eAAe,sDC5ChF,SAAS6I,KAAqB,IAAD,IAC5BpL,EAAWkB,cACXhL,EAAWC,cAETkV,EAA2B1S,aAAY,SAAAC,GAAK,OAAIA,EAAMoB,QAAtDqR,uBAER,EAA0ClK,mBAAS,IAAG,mBAA/CG,EAAa,KAAEC,EAAgB,KACtC,EAA4CJ,mBAAS,IAAG,mBAAjDmK,EAAc,KAAEC,EAAiB,KAQxC,MAAuC,sBAArB,QAAd,EAAArV,EAASgE,aAAK,OAAM,QAAN,EAAd,EAAgBD,YAAI,WAAN,EAAd,EAAsBlD,UACjB,cAAC,IAAQ,CAACN,GAAG,qBAGlB4U,EACM,cAAC,IAAQ,CAAC5U,GAAI,WAMtB,sBAAML,UAAWoL,IAAaC,KAAK,SAEjC,sBAAKrL,UAAWoL,IAAaE,UAAU,UACrC,oBAAItL,UAAU,6BAA4B,uIAE1C,uBAAMA,UAAWoL,IAAaG,KAAMC,SAtBrB,SAACC,GACpBA,EAAEC,iBAEF9B,EAASW,GAAcW,EAAegK,KAmByB,UACzD,cAAC,gBAAa,CACZvQ,MAAOuG,EACPU,SAAU,SAAAH,GAAC,OAAIN,EAAiBM,EAAEI,OAAOlH,QACzCgH,YAAa,iHACbG,WAAW,SAEb,cAAC,QAAK,CACJnH,MAAOuQ,EACPxU,KAAM,OACNiL,YAAa,kHACbC,SAAU,SAAAH,GAAC,OAAI0J,EAAkB1J,EAAEI,OAAOlH,QAC1CmH,WAAW,SAEb,cAAC,SAAM,CACLC,SAAS,SACTrL,KAAK,UACLsL,KAAK,SACLF,WAAW,aACXG,UAAWf,IAAkBgK,EAAe,uEAKhD,qBAAKlV,UAAS,UAAKoL,IAAac,gBAAe,SAAQ,SACrD,oBAAGlM,UAAU,kDAAiD,0GAC1C,cAAC,IAAI,CAACK,GAAG,SAASL,UAAWoL,IAAae,eAAe,sD,4CCxDhF,SAASiJ,KACZ,IAAMxL,EAAWkB,cACXhL,EAAWC,cAoBjB,OACI,sBAAKC,UAAWC,KAAOoV,aAAa,UAChC,8BACI,qBAAIrV,UAAWC,KAAOG,KAAK,UACvB,oBAAIJ,UAAWC,KAAOkS,SAAS,SAC3B,cAAC,IAAO,CACJ9R,GAAG,WACHC,OAAO,EACPN,UAAS,UAAKC,KAAOkM,eAAc,mDACnC3L,gBAAiB4K,IAAakK,qBAAqB,0DAI3D,oBAAItV,UAAWC,KAAOkS,SAAS,SAC3B,cAAC,IAAO,CACJ9R,GAAG,kBACHC,OAAO,EACPN,UAAS,UAAKC,KAAOkM,eAAc,mDACnC3L,gBAAiB4K,IAAakK,qBAAqB,qGAI3D,oBAAItV,UAAWC,KAAOkS,SAAS,SAC3B,cAAC,IAAO,CACJ9R,GAAG,SACHC,OAAO,EACPQ,QAjCA,SAAC2K,GACrBA,EAAEC,iBAEF9B,EAASO,OA+BWnK,UAAS,UAAKC,KAAOkM,eAAc,mDACnC3L,gBAAiB4K,IAAakK,qBAAqB,mDAOnE,mBAAGtV,UAAU,wDAAuD,SArDzC,SAACF,GAChC,OAAQA,EAASa,UACb,IAAK,WACD,OAAO,+VACX,IAAK,kBACD,OAAO,yVACX,QACI,MAAO,IA+CN4U,CAA2BzV,Q,yBC3DrC,SAAS0V,KACZ,IAAM5L,EAAWkB,cACjB,EAAwBvI,aAAY,SAAAC,GAAK,OAAIA,EAAMoB,KAAKD,QAAhDX,EAAI,EAAJA,KAAM8E,EAAK,EAALA,MAEd,EAAkCiD,mBAAS,IAAG,mBAAvC6J,EAAS,KAAEC,EAAY,KAC9B,EAAoC9J,mBAAS,IAAG,mBAAzC0K,EAAU,KAAEC,EAAa,KAChC,EAA0C3K,mBAAS,IAAG,mBAA/CG,EAAa,KAAEC,EAAgB,KAuBtC,OAPA9J,qBAAU,WACNwT,EAAa7R,GACb0S,EAAc5N,KAEd,CAAC9E,EAAM8E,IAIP,uBAAM0D,SAtBW,SAACC,GAClBA,EAAEC,iBAEF9B,EAASe,GAAgB8K,EAAYb,EAAW1J,KAmBlByK,QAhBd,SAAClK,GACjBA,EAAEC,iBAEFmJ,EAAa7R,GACb0S,EAAc5N,GACdqD,EAAiB,KAWkC,UAC/C,cAAC,QAAK,CACFxG,MAAOiQ,EACPlU,KAAM,OACNkV,KAAM,WACNjK,YAAa,qBACbC,SAAU,SAAAH,GAAC,OAAIoJ,EAAapJ,EAAEI,OAAOlH,QACrCmH,WAAW,SAEf,cAAC,QAAK,CACFnH,MAAO8Q,EACP/U,KAAM,OACNkV,KAAM,WACNjK,YAAa,iCACbC,SAAU,SAAAH,GAAC,OAAIiK,EAAcjK,EAAEI,OAAOlH,QACtCmH,WAAW,SAEf,cAAC,gBAAa,CACVnH,MAAOuG,EACP0K,KAAM,WACNhK,SAAU,SAAAH,GAAC,OAAIN,EAAiBM,EAAEI,OAAOlH,UAE7C,sBAAK3E,UAAS,UAAKC,KAAO4V,YAAW,SAAQ,UACzC,cAAC,SAAM,CAAC9J,SAAS,QAAQrL,KAAK,UAAUsL,KAAK,SAAQ,kDACrD,cAAC,SAAM,CAACD,SAAS,SAASrL,KAAK,UAAUsL,KAAK,SAAQ,0ECvD/D,SAAS8J,KACd,OACE,sBAAM9V,UAAWoL,IAAaC,KAAK,SACjC,sBAAKrL,UAAWC,KAAOqL,UAAU,UAC/B,cAAC8J,GAAU,IAEX,qBAAKpV,UAAWC,KAAO8V,iBAAiB,SACtC,cAACP,GAAW,W,wBCTf,SAASQ,KAEd,OACE,sBAAMhW,UAAWoL,IAAaC,KAAK,SACjC,sBAAKrL,UAAWC,KAAOqL,UAAU,UAC/B,oBAAItL,UAAS,UAAKC,KAAOgW,GAAE,8BAA6B,mBACxD,mBAAGjW,UAAS,UAAKC,KAAOiW,GAAE,gCAA+B,iBACzD,mBAAGlW,UAAS,UAAKC,KAAOkW,GAAE,8BAA6B,6BAEvD,qBAAKnW,UAAWC,KAAOiM,gBAAgB,SACrC,oBAAGlM,UAAU,kDAAiD,UAC5D,cAAC,IAAI,CAACK,GAAG,IAAIL,UAAWoL,IAAae,eAAe,oEAAiB,sH,oFCX1E,SAASiK,GAAe,GAAqC,IAAnCC,EAAU,EAAVA,WAAW,EAAD,EAAEC,sBAAc,MAAG,EAAC,EAC7D,OACE,sBAAKtW,UAAWC,KAAOsW,cAAc,UACnC,qBAAK1T,IAAKwT,EAAWpT,MAAOF,IAAKsT,EAAWrT,KAAMhD,UAAWC,KAAOgD,QACnEqT,EAAkB,qBAAKtW,UAAWC,KAAOe,QAAQ,SAChD,mBAAGhB,UAAU,8BAA6B,oBAAMsW,OACxC,QCUhB,IAAME,GAAsB,SAACC,EAAgBC,GAC3C,OAAqB,OAAdD,QAAc,IAAdA,OAAc,EAAdA,EAAgBxG,KAAI,SAAA7N,GACzB,OAAOsU,EAAkBhU,MAAK,SAACC,GAC7B,OAAOA,EAAKC,MAAQR,SAKpBuU,GAAgB,SAACF,GACrB,OAAqB,OAAdA,QAAc,IAAdA,OAAc,EAAdA,EAAgBpD,QAAO,SAACC,EAAK3Q,GAClC,OAAO2Q,EAAO3Q,EAAKgL,QAClB,IC9BQiJ,GAAoB,SAACC,EAAQ5W,GACtC,OAAQ4W,GACJ,IAAK,OACD,OAAO,mBAAG7W,UAAS,UAAKC,EAAM,YAAImL,IAAa0L,YAAa,SAAE,qDAClE,IAAK,UACD,OAAO,mBAAG9W,UAAWC,EAAO,SAAE,2DAClC,IAAK,UACD,OAAO,mBAAGD,UAAWC,EAAO,SAAE,yCAClC,IAAK,YACD,OAAO,mBAAGD,UAAS,UAAKC,EAAM,YAAImL,IAAa2L,iBAAkB,SAAE,+CACvE,QACI,OAAO,mBAAG/W,UAAWC,EAAO,SAAE4W,MCFnC,SAASG,GAAM,GAAiC,IAetBC,EAfTnN,EAAI,EAAJA,KAAK,EAAD,EAAEoN,oBAAY,OAAQ,EAC1CtN,EAAWkB,cAETwB,EAAiDxC,EAAjDwC,OAAQ6K,EAAyCrN,EAAzCqN,UAAWnU,EAA8B8G,EAA9B9G,KAAM6T,EAAwB/M,EAAxB+M,OAAQhP,EAAgBiC,EAAhBjC,YACjCvF,EAAmBC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,kBAA9CA,eAEF8U,EAAmBtK,mBAAQ,WAC/B,OAAO0J,GAAoB3O,EAAavF,KACvC,CAACuF,EAAavF,IAEX+U,EAAavK,mBAAQ,WACzB,OAAO6J,GAAcS,KACpB,CAACA,IAiBEE,EAAezH,uBAAY,WAC/BjG,EAAS,CAAElJ,KAAM2O,GAAWtF,QAAS,CAAE5J,QAAS,oBAC/C,CAACyJ,IAIJ,OACE,oBAAI5J,UAAU,OAAOc,QAASwW,EAAa,SACzC,sBAAKtX,UAAS,UAAKC,KAAOqL,UAAS,aAAY,UAE7C,sBAAKtL,UAAS,UAAKC,KAAOsX,YAAW,SAAQ,UAC3C,mBAAGvX,UAAU,gCAA+B,oBAAMsM,KAClD,qBAAKtM,UAAU,kDAAiD,SAC9D,oBAAGA,UAAWC,KAAOuX,mBAAmB,UACtC,cAAC,gBAAa,CAACC,KAAM,IAAIzS,KAAKmS,KAAc,kBAChC,IAAInS,KAAKmS,GAAWO,oBAAsB,YAK5D,mBAAG1X,UAAU,6BAA4B,SAAEgD,IAE1CkU,GAAgBN,GAAkBC,EAAQ,oCAE3C,sBAAK7W,UAAS,UAAKC,KAAO0X,iBAAgB,SAAQ,UAChD,oBAAI3X,UAAWC,KAAOG,KAAK,UAvCJ6W,EAwCEG,EAvCxBH,EAAMhH,KAAI,SAACtN,EAAM4O,GACtB,OAAIA,E1BP8C,E0BQzC,oBAAIvR,UAAWC,KAAOkS,SAAsB3E,MAAO,CAAEoK,KAAc,GAARrG,EAAYsG,OAAQZ,EAAM7D,OAAS7B,GAAQ,SAC3G,cAAC6E,GAAc,CAACC,WAAY1T,KADc4O,G1BRI,I0BWvCA,EACF,oBAAIvR,UAAWC,KAAOkS,SAAsB3E,MAAO,CAAEoK,KAAc,GAARrG,EAAYsG,OAAQZ,EAAM7D,OAAS7B,GAAQ,SAC3G,cAAC6E,GAAc,CAACC,WAAY1T,EAAM2T,eAAgBW,EAAM7D,OAAS7B,KADvBA,GAGhC,WAiCV,sBAAKvR,UAAS,UAAKC,KAAO6X,WAAU,SAAQ,UAC1C,mBAAG9X,UAAU,qCAAoC,SAAEqX,EAAWU,mBAC9D,cAAC,eAAY,CAACrX,KAAK,uBC/DxB,SAASsX,GAAW,GAA2B,IAAD,IAAxBd,oBAAY,OAAQ,EACzCpX,EAAWC,cACTkY,EAAW1V,aAAY,SAAAC,GAAK,OAAIA,EAAM0V,MAAtCD,OACFtS,EAAQwS,cAEd,OACE,oBAAInY,UAAWC,KAAOG,KAAK,SACxB6X,GAAUA,EAAOhI,KAAI,SAAAtN,GACpB,OACE,cAAC,IAAI,CAACtC,GAAI,CAAEM,SAAS,GAAD,OAAKgF,EAAMyS,KAAI,YAAIzV,EAAKC,KAAOkB,MAAO,CAAEwJ,WAAYxN,IAAcE,UAAWC,KAAOM,KAAK,SAC3G,cAACyW,GAAK,CAAClN,KAAMnH,EAAMuU,aAAcA,KADgFvU,EAAKC,UCjB3H,IAAMyV,GAAqB,qBACrBC,GAAwB,wBACxBC,GAAsB,sBACtBC,GAAsB,sBACtBC,GAA2B,2BAC3BC,GAAiB,iBAIjBC,GAAmB,WAAH,OAAS,SAAC/O,GACnCA,EAAS,CACLlJ,KAAM2X,GACNtO,QAAS,WAIJ6O,GAAuB,SAAC7R,GAAW,OAAK,SAAC6C,GAClDA,EAAS,CACLlJ,KAAM2X,GACNtO,QAAQ,UAAD,OAAYhD,OAId8R,GAAoB,WAAH,OAAS,SAACjP,GACpCA,EAAS,CACLlJ,KAAM8X,OCdP,SAASM,KACd,IAAMlP,EAAWkB,cACX9C,EAAQvC,EAAU,SAChBsT,EAAgBxW,aAAY,SAAAC,GAAK,OAAIA,EAAM0V,MAA3Ca,YAWR,OATA1X,qBAAU,WAGR,OAFAuI,EAASgP,GAAqB5Q,IAEvB,WACL4B,EAASiP,SAEV,CAACjP,IAIF,sBAAM5J,UAAWoL,IAAaC,KAAK,SACjC,sBAAKrL,UAAWC,KAAOqL,UAAU,UAC/B,cAAC8J,GAAU,IAEX,qBAAKpV,UAAWC,KAAO+Y,oBAAoB,SACvCD,EAGA,cAACf,GAAU,CAACd,cAAc,IAF1B,cAAC,GAAM,CAAClL,KAAM,sB,4CC3BnB,SAASiN,KACd,MAAsC1W,aAAY,SAAAC,GAAK,OAAIA,EAAM0V,MAAzDD,EAAM,EAANA,OAAQiB,EAAK,EAALA,MAAOC,EAAU,EAAVA,WAEjBC,EAAyB,OAANnB,QAAM,IAANA,OAAM,EAANA,EAAQjI,QAAO,SAAArN,GAAI,MAAoB,SAAhBA,EAAKkU,UAAmBjD,MAAM,EAAG,IAC3EyF,EAA4B,OAANpB,QAAM,IAANA,OAAM,EAANA,EAAQjI,QAAO,SAAArN,GAAI,MAAoB,YAAhBA,EAAKkU,UAAsBjD,MAAM,EAAG,IAEjF0F,EAAqB,SAACC,GAAiC,IAApBC,EAAM,wDAC7C,OAAOD,EAAYtJ,KAAI,SAAAtN,GACrB,OACE,oBAAmB3C,UAAS,UAAKC,KAAOkS,SAAQ,SAAQ,SACtD,mBAAGnS,UAAS,UAAKwZ,EAASvZ,KAAOwZ,UAAY,GAAE,kCAAiC,SAAE9W,EAAK2J,UADhF3J,EAAKC,SAMpB,OACE,sBAAK5C,UAAS,UAAKC,KAAOqL,UAAS,gBAAe,UAEhD,sBAAKtL,UAAS,UAAKC,KAAOyZ,YAAW,UAAS,UAC5C,sBAAK1Z,UAAWC,KAAO0Z,UAAU,UAC/B,oBAAI3Z,UAAU,kCAAiC,mDAE/C,oBAAIA,UAAWC,KAAOG,KAAK,SACxBkZ,EAAmBF,GAAkB,QAI1C,sBAAKpZ,UAAS,UAAKC,KAAO0Z,UAAS,SAAQ,UACzC,oBAAI3Z,UAAU,kCAAiC,0DAE/C,oBAAIA,UAAWC,KAAOG,KAAK,SACxBkZ,EAAmBD,WAK1B,sBAAKrZ,UAAWC,KAAO2Z,WAAW,UAChC,oBAAI5Z,UAAU,6BAA4B,oIAC1C,mBAAGA,UAAS,UAAKC,KAAO4Z,SAAQ,sCAAqC,SAAEX,EAAMnB,sBAG/E,sBAAK/X,UAAWC,KAAO2Z,WAAW,UAChC,oBAAI5Z,UAAU,6BAA4B,6HAC1C,mBAAGA,UAAS,UAAKC,KAAO4Z,SAAQ,gCAA+B,SAAEV,UCrClE,SAASW,KACd,IAAMlQ,EAAWkB,cACTiO,EAAgBxW,aAAY,SAAAC,GAAK,OAAIA,EAAM0V,MAA3Ca,YAUR,OARA1X,qBAAU,WAGR,OAFAuI,EAAS+O,MAEF,WACL/O,EAASiP,SAEV,CAACjP,IAGF,sBAAM5J,UAAWoL,IAAaC,KAAK,SAEjC,qBAAKrL,UAAWC,KAAOqL,UAAU,SAC7ByN,EAGA,qCACE,sBAAK/Y,UAAS,UAAKC,KAAO+Y,oBAAmB,SAAQ,UACnD,oBAAIhZ,UAAU,iCAAgC,uFAE9C,cAACgY,GAAU,OAGb,cAACiB,GAAU,OATb,cAAC,GAAM,CAACjN,KAAM,mBC1BjB,IAAM+N,GAA8B,8BAC9BC,GAA8B,8BAC9BC,GAA6B,6BAGnC,SAASC,KACd,OAAO,SAAUtQ,GACfA,EAAS,CAAElJ,KAAMqZ,K9B8Cd,WAAuC,+B8B5C1CI,GAA2B9T,MAAK,SAAAH,GAC1BA,GAAOA,EAAIkU,QACbxQ,EAAS,CACPlJ,KAAMsZ,GACNK,MAAOnU,EAAI4D,OAGbF,EAAS,CAAElJ,KAAMuZ,S,wBCSVK,OAtBf,SAAmB,GAA6C,IAA3CC,EAAO,EAAPA,QAASC,EAAW,EAAXA,YAAaC,EAAgB,EAAhBA,iBACzC,OACE,sBAAKza,UAAWC,KAAOE,QAAQ,UAC7B,oBAAIH,UAAS,UAAKC,KAAOC,OAAM,qCAAoC,SAAEqa,IACrE,mBAAGva,UAAU,kCAAiC,iIAC9C,qBAAKA,UAAS,UAAKC,KAAOgD,MAAK,YAC/B,mBAAGjD,UAAU,oCAAmC,SAAEwa,IAClD,mBAAGxa,UAAU,6DAA4D,SAAEya,Q,oBCF1E,SAASC,KACd,IAAQtY,EAAOC,cAAPD,GAEF6V,EAAS1V,aAAY,SAAAC,GAAK,OAAIA,EAAM0V,GAAGD,UACvC0C,EAAc,OAAN1C,QAAM,IAANA,OAAM,EAANA,EAAQvV,MAAK,SAAAC,GAAI,OAAIA,EAAKC,MAAQR,KAIxCE,EAAmBC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,kBAA9CA,eAEF8U,EAAmBtK,mBAAQ,WAC/B,OAAO0J,GAAyB,OAALmE,QAAK,IAALA,OAAK,EAALA,EAAO9S,YAAavF,KAC9C,CAAM,OAALqY,QAAK,IAALA,OAAK,EAALA,EAAO9S,YAAavF,IAElB+U,EAAavK,mBAAQ,WACzB,OAAO6J,GAAcS,KACpB,CAACA,IAGEwD,EAAoBC,MAAMhX,KAAK,IAAIiX,IAAI1D,IAS7C,OAAKuD,EAKH,sBAAK3a,UAAS,UAAKC,KAAOE,QAAO,gBAAe,UAE9C,qBAAKH,UAAWC,KAAO8a,YAAY,SACjC,mBAAG/a,UAAU,gCAA+B,oBAAM2a,EAAMrO,YAG1D,oBAAItM,UAAU,wCAAuC,SAAE2a,EAAM3X,OAE5D4T,GAAkB+D,EAAM9D,OAAO,+BAAD,OAAiC5W,KAAO+a,SAEvE,mBAAGhb,UAAU,wCAAuC,SAAE,0CACtD,oBAAIA,UAAWC,KAAO+Q,gBAAgB,SACnC4J,EAAkB3K,KAAI,SAACtN,EAAM4O,GAAK,OAAK,qBAAIvR,UAAS,UAAKC,KAAOkS,SAAQ,cAAa,UACpF,sBAAKnS,UAAWC,KAAOgb,uBAAuB,UAC5C,cAAC7E,GAAc,CAACC,WAAY1T,IAC5B,mBAAG3C,UAAU,wCAAuC,SAAE2C,EAAKK,UAG7D,sBAAKhD,UAAWC,KAAOqL,UAAU,UAC/B,mBAAGtL,UAAS,UAAKC,KAAO0N,MAAK,kCAAiC,oBA9B5C0I,EA8BoE1T,EA7BvFyU,EAAiBpH,QAAO,SAAArN,GAC7B,OAAOA,IAAS0T,KACfjD,QA2BgG,cAAMzQ,EAAKgL,MAAMoK,oBAC5G,cAAC,eAAY,CAACrX,KAAK,iBARqE6Q,GAvBvE,IAAC8E,OAoCxB,sBAAKrW,UAAS,UAAKC,KAAOib,gBAAe,WAAU,UACjD,oBAAGlb,UAAS,UAAKC,KAAOuX,mBAAkB,oDAAmD,UAC3F,cAAC,gBAAa,CAACC,KAAM,IAAIzS,KAAK2V,EAAMxD,aAAc,kBACtC,IAAInS,KAAK2V,EAAMxD,WAAWO,oBAAsB,OAG9D,sBAAK1X,UAAWC,KAAOqL,UAAU,UAC/B,mBAAGtL,UAAS,UAAKC,KAAO0N,MAAK,kCAAiC,SAAE0J,EAAWU,mBAC3E,cAAC,eAAY,CAACrX,KAAK,qBArClB,KC7BJ,SAASya,KACZ,IAAMvR,EAAWkB,cACXhL,EAAWC,cACXiI,EAAQvC,EAAU,SAChBsT,EAAgBxW,aAAY,SAAAC,GAAK,OAAIA,EAAM0V,MAA3Ca,YAgBR,OAdA1X,qBAAU,WAQN,OAPIvB,EAASa,SAASya,SAAS,UAC3BxR,EAAS+O,MAET7Y,EAASa,SAASya,SAAS,oBAC3BxR,EAASgP,GAAqB5Q,IAG3B,WACH4B,EAASiP,SAEd,CAACjP,IAIA,sBAAM5J,UAAWoL,IAAaC,KAAK,SAC7B0N,EAGE,cAAC2B,GAAY,IAFb,cAAC,GAAM,CAAC1O,KAAM,iBCHf,SAASqP,KAAO,IAAD,EACtBzR,EAAWkB,cACXiI,EAAUC,cACVlT,EAAWC,cAEXuN,EAA2B,QAAjB,EAAGxN,EAASgE,aAAK,aAAd,EAAgBwJ,WAEnC,EAA8B/K,aAAY,SAAAC,GAAK,OAAIA,EAAM8Y,SAAjDC,EAAQ,EAARA,SAAUpb,EAAO,EAAPA,QAClB,EAAwCoC,aAAY,SAAAC,GAAK,OAAIA,EAAMgZ,aAA3DA,EAAS,EAATA,UAAWC,EAAgB,EAAhBA,iBAEnBpa,qBAAU,WACRuI,EAASa,QAET,CAACb,IAEHvI,qBAAU,WACRuI,EAASsQ,QACR,CAACtQ,IAEJ,IAUM8R,EAA2B,WAC/B9R,EAAS,CAAElJ,KAAM4O,KACjByD,EAAQlN,QAAQ,CAAElF,SAAU2M,EAAW3M,YAKzC,OACE,sBAAKX,UAAW2b,IAAUC,KAAK,UAC7B,cAAC,EAAS,IAEV,eAAC,IAAM,CAAC9b,SAAUwN,GAAcxN,EAAS,UACvC,cAAC,IAAK,CAACsY,KAAK,IAAI9X,OAAO,EAAK,SAC1B,cAACiU,GAAQ,MAEX,cAAC/Q,EAAc,CAAC4U,KAAK,SAAS9X,OAAO,EAAMmD,YAAY,EAAK,SAC1D,cAACoH,GAAS,MAEZ,cAACrH,EAAc,CAAC4U,KAAK,YAAY9X,OAAO,EAAMmD,YAAY,EAAK,SAC7D,cAACkR,GAAgB,MAEnB,cAACnR,EAAc,CAAC4U,KAAK,mBAAmB9X,OAAO,EAAMmD,YAAY,EAAK,SACpE,cAACqR,GAAkB,MAErB,cAACtR,EAAc,CAAC4U,KAAK,kBAAkB9X,OAAO,EAAMmD,YAAY,EAAK,SACnE,cAACuR,GAAiB,MAEpB,cAACxR,EAAc,CAAC4U,KAAK,WAAW9X,OAAO,EAAK,SAC1C,cAACwV,GAAW,MAEd,cAACtS,EAAc,CAAC4U,KAAK,kBAAkB9X,OAAO,EAAK,SACjD,cAACwY,GAAU,MAEb,cAACtV,EAAc,CAAC4U,KAAK,sBAAsB9X,OAAO,EAAK,SACrD,cAAC6a,GAAgB,MAEnB,cAAC,IAAK,CAAC/C,KAAK,mBAAmB9X,OAAO,EAAK,SACzC,cAAC,EAAiB,MAEpB,cAAC,IAAK,CAAC8X,KAAK,QAAQ9X,OAAO,EAAK,SAC9B,cAACwZ,GAAQ,MAEX,cAAC,IAAK,CAAC1B,KAAK,YAAY9X,OAAO,EAAK,SAClC,cAAC6a,GAAgB,MAEnB,cAAC,IAAK,UACJ,cAACnF,GAAY,SAIhB1I,GAA2B,eAAZnN,GACb,cAAC,IAAK,CAACiY,KAAK,mBAAmB9X,OAAO,EAAK,SAC1C,cAAC,EAAK,CAACc,MAAM,0GAAqBD,QAAS,kBA9DpB,SAACmM,GAC9B1D,EAAS,CAAElJ,KAAM4O,KACjByD,EAAQlN,QAAQ,CAAElF,SAAU2M,EAAW3M,WA4DgBkb,CAAuBvO,IAAY,SAClF,cAAC,EAAiB,QAIvBA,GACE,cAAC9J,EAAc,CAAC4U,KAAK,sBAAsB9X,OAAO,EAAK,SACtD,cAAC,EAAK,CAACa,QAAS,kBAAMua,KAAqC,SACzD,cAAChB,GAAY,QAIlBpN,GACE,cAAC,IAAK,CAAC8K,KAAK,YAAY9X,OAAO,EAAK,SACnC,cAAC,EAAK,CAACa,QAAS,kBAAMua,KAAqC,SACzD,cAAChB,GAAY,QAIlBa,GAAyB,cAAZpb,GACZ,cAAE,EAAK,CAACgB,QAAS,kBA5ErByI,EAAS,CAAElJ,KAAM4O,UACbkM,EAAUpB,SAASxQ,EAAS,CAAElJ,KAAM2Q,OA2EW,SAC5CoK,EAAoB,cAAC,GAAM,CAACzP,KAAK,eAChCwP,EAAUpB,QACR,cAAC,GAAS,CACRG,QAASiB,EAAUb,MAAMrO,OAAOqH,WAChC6G,YAAY,0IACZC,iBAAiB,mPAEnB,cAAC,GAAS,CACRF,QAAQ,GACRC,YAAY,kPACZC,iBAAiB,qL,IC1IAqB,GAAOC,G,mBCGlCC,GAAe,CACnB1Z,eAAgB,GAChBqN,uBAAuB,EACvBsM,sBAAsB,GCDlBD,GAAe,CACnBtP,IAAK,GACLE,SAAU,ICLNoP,GAAe,CACnBR,UAAW,CACTxY,KAAM,GACN2X,MAAO,CACLrO,OAAQ,MAEV8N,SAAS,GAEXqB,kBAAkB,GCcdO,GAAe,CACnBrY,KAAM,KACNuY,qBAAqB,EACrBC,oBAAoB,EACpBC,0BAA2B,GAC3BC,cAAc,EACdC,aAAa,EACbC,mBAAoB,GACpBC,eAAe,EACfC,cAAc,EACdC,oBAAqB,GACrBpS,uBAAuB,EACvBqS,sBAAsB,EACtBC,sBAAuB,GACvBpS,sBAAsB,EACtBqS,qBAAqB,EACrBC,qBAAsB,GACtBpS,oBAAoB,EACpBqS,mBAAmB,EACnBC,mBAAoB,GACpBpS,wBAAwB,EACxBqS,uBAAuB,EACvBC,uBAAwB,GACxBpW,oBAAoB,EACpBqW,mBAAmB,EACnBC,mBAAoB,GACpBrI,iCAAiC,EACjCE,wBAAwB,GCpDpB+G,GAAe,CACnBT,UAAU,EACVpb,QAAS,ICIL6b,GAAe,CACjBjD,aAAa,EACbsE,WAAOtX,EACPkS,OAAQ,GACRiB,MAAO,EACPC,WAAY,GCLHmE,GAAcC,aAAgB,CACzCjb,eNKmC,WAAmC,IAAlCwB,EAAK,uDAAGkY,GAAcwB,EAAM,uCAChE,OAAQA,EAAO9c,MACb,KAAKqZ,GACH,OAAO,2BACFjW,GAAK,IACR6L,uBAAuB,IAG3B,KAAKqK,GACH,OAAO,2BACFlW,GAAK,IACR6L,uBAAuB,EACvBsM,sBAAsB,EACtB3Z,eAAgBkb,EAAOnD,QAG3B,KAAKJ,GACH,OAAO,2BACFnW,GAAK,IACR6L,uBAAuB,EACvBsM,sBAAsB,IAG1B,QACE,OAAOnY,IM5BX2I,uBLK2C,WAAmC,IAAlC3I,EAAK,uDAAGkY,GAAcwB,EAAM,uCACxE,OAAQA,EAAO9c,MACb,KAAKuQ,GACH,OAAO,2BACFnN,GAAK,IACR4I,IAAK8Q,EAAOzT,UAGhB,KAAKmH,GACH,OAAO,2BACFpN,GAAK,IACR8I,SAAS,GAAD,oBAAM9I,EAAM8I,UAAQ,CAAE4Q,EAAOzT,YAGzC,KAAKoH,GACH,OAAO,2BACFrN,GAAK,IACR8I,SAAU,aAAI9I,EAAM8I,UAAUoD,QAAO,SAAArN,GAAI,OAAIA,EAAKP,KAAOob,EAAOpb,QAGpE,KAAKgP,GACH,IAAMqM,EAAe,aAAO3Z,EAAM8I,UAQlC,OANA6Q,EAAgBC,OACdF,EAAO3L,UACP,EACA4L,EAAgBC,OAAOF,EAAO1L,UAAW,GAAG,IAGvC,2BACFhO,GAAK,IACR8I,SAAU6Q,IAGd,KAAKpM,GACH,OAAO2K,GAET,QACE,OAAOlY,IK1CX0X,UJO8B,WAAmC,IAAlC1X,EAAK,uDAAGkY,GAAcwB,EAAM,uCAC3D,OAAQA,EAAO9c,MACb,KAAK+R,GACH,OAAO,2BACF3O,GAAK,IACR2X,kBAAkB,IAGtB,KAAK/I,GACH,OAAO,2BACF5O,GAAK,IACR2X,kBAAkB,EAClBD,UAAWgC,EAAOzT,UAGtB,KAAK4I,GACH,OAAOqJ,GAET,QACE,OAAOlY,IIzBXF,KH+CyB,WAAmC,IAAlCE,EAAK,uDAAGkY,GAAcwB,EAAM,uCACtD,OAAQA,EAAO9c,MACb,KAAKyH,GACH,OAAO,2BACFrE,GAAK,IACRoY,qBAAqB,IAGzB,KAAK9T,GACH,MAA4CoV,EAAOzT,QAA3CpG,EAAI,EAAJA,KAAMoD,EAAW,EAAXA,YAAaC,EAAY,EAAZA,aAM3B,OAJAtC,EAAU,QAASqC,EAAYE,MAAM,WAAW,IAChDC,aAAaC,QAAQ,eAAgBH,GACrCI,QAAQC,IAAI,yBAEL,2BACFvD,GAAK,IACRoY,qBAAqB,EACrBC,oBAAoB,EACpBC,0BAA2B,GAC3BzY,KAAMA,IAGV,KAAK0E,GACH,OAAO,2BACFvE,GAAK,IACRoY,qBAAqB,EACrBC,oBAAoB,EACpBC,0BAA2BoB,EAAOzT,UAGtC,KAAKzB,GACH,OAAO,2BACFxE,GAAK,IACRuY,cAAc,IAGlB,KAAK9T,GACH,MAA4CiV,EAAOzT,QAA3CpG,EAAI,EAAJA,KAAMoD,EAAW,EAAXA,YAAaC,EAAY,EAAZA,aAM3B,OAJAtC,EAAU,QAASqC,EAAYE,MAAM,WAAW,IAChDC,aAAaC,QAAQ,eAAgBH,GACrCI,QAAQC,IAAI,kBAEL,2BACFvD,GAAK,IACRuY,cAAc,EACdC,aAAa,EACbC,mBAAoB,GACpB5Y,KAAMA,IAGV,KAAK6E,GACH,OAAO,2BACF1E,GAAK,IACRuY,cAAc,EACdC,aAAa,EACbC,mBAAoBiB,EAAOzT,UAG/B,KAAKtB,GACH,OAAO,2BACF3E,GAAK,IACR0Y,eAAe,IAGnB,KAAK9T,GAKH,OAJA1C,EAAa,SACbkB,aAAayW,WAAW,gBACxBvW,QAAQC,IAAI,mBAEL,2BACFvD,GAAK,IACR0Y,eAAe,EACfC,cAAc,EACdC,oBAAqB,GACrB/Y,KAAMqY,GAAarY,OAGvB,KAAKgF,GACH,OAAO,2BACF7E,GAAK,IACR0Y,eAAe,EACfC,cAAc,EACdC,oBAAqBc,EAAOzT,UAGhC,KAAKnB,GACH,OAAO,2BACF9E,GAAK,IACRwG,uBAAuB,IAG3B,KAAKzB,GACH,IAAQhC,EAAY2W,EAAOzT,QAAnBlD,QAGR,OAFAO,QAAQC,IAAI,8BAA+BR,GAEpC,2BACF/C,GAAK,IACRwG,uBAAuB,EACvBqS,sBAAsB,EACtBC,sBAAuB/V,EACvBkO,iCAAiC,IAGrC,KAAKjM,GACH,OAAO,2BACFhF,GAAK,IACRwG,uBAAuB,EACvBqS,sBAAsB,EACtBC,sBAAuBY,EAAOzT,UAGlC,KAAKhB,GACH,OAAO,2BACFjF,GAAK,IACR0G,sBAAsB,IAG1B,KAAKxB,GACH,IAAQnC,EAAY2W,EAAOzT,QAAnBlD,QAGR,OAFAO,QAAQC,IAAI,2BAA4BR,GAEjC,2BACF/C,GAAK,IACR0G,sBAAsB,EACtBqS,qBAAqB,EACrBC,qBAAsBjW,EACtBkO,iCAAiC,EACjCE,wBAAwB,IAG5B,KAAKhM,GACH,OAAO,2BACFnF,GAAK,IACR0G,sBAAsB,EACtBqS,qBAAqB,EACrBC,qBAAsBU,EAAOzT,UAGjC,KAAKb,GACH,OAAO,2BACFpF,GAAK,IACR4G,oBAAoB,IAGxB,KAAKvB,GACH,IAAQxF,EAAS6Z,EAAOzT,QAAhBpG,KAGR,OAFAyD,QAAQC,IAAI,oCAEL,2BACFvD,GAAK,IACR4G,oBAAoB,EACpBqS,mBAAmB,EACnBC,mBAAoB,GACpBrZ,KAAMA,IAGV,KAAKyF,GACH,OAAO,2BACFtF,GAAK,IACR4G,oBAAoB,EACpBqS,mBAAmB,EACnBC,mBAAoBQ,EAAOzT,UAG/B,KAAKV,GACH,OAAO,2BACFvF,GAAK,IACR8G,wBAAwB,IAG5B,KAAKtB,GACH,IAAQ3F,EAAS6Z,EAAOzT,QAAhBpG,KAGR,OAFAyD,QAAQC,IAAI,qCAEL,2BACFvD,GAAK,IACR8G,wBAAwB,EACxBqS,uBAAuB,EACvBC,uBAAwB,GACxBvZ,KAAMA,IAGV,KAAK4F,GACH,OAAO,2BACFzF,GAAK,IACR8G,wBAAwB,EACxBqS,uBAAuB,EACvBC,uBAAwBM,EAAOzT,UAGnC,KAAKP,GACH,OAAO,2BACF1F,GAAK,IACRgD,oBAAoB,IAGxB,KAAK2C,GACH,MAAsC+T,EAAOzT,QAArChD,EAAW,EAAXA,YAAaC,EAAY,EAAZA,aAMrB,OAJAtC,EAAU,QAASqC,EAAYE,MAAM,WAAW,IAChDC,aAAaC,QAAQ,eAAgBH,GACrCI,QAAQC,IAAI,kDAEL,2BACFvD,GAAK,IACRgD,oBAAoB,EACpBqW,mBAAmB,EACnBC,mBAAoB,KAGxB,KAAK1T,GACH,OAAO,2BACF5F,GAAK,IACRgD,oBAAoB,EACpBqW,mBAAmB,EACnBC,mBAAoBI,EAAOzT,UAG/B,QACE,OAAOjG,IG3QXwX,MFJ0B,WAAmC,IAAlCxX,EAAK,uDAAGkY,GAAcwB,EAAM,uCACvD,OAAQA,EAAO9c,MACb,KAAK2O,GACH,MAAO,CACLkM,UAAU,EACVpb,QAASqd,EAAOzT,QAAQ5J,SAG5B,KAAKmP,GACH,OAAO0M,GAET,QACE,OAAOlY,IEPXoU,GDEuB,WAAmC,IAAlCpU,EAAK,uDAAGkY,GAAcwB,EAAM,uCAClD,OAAQA,EAAO9c,MACX,KAAK4X,GAGD,OAFAlR,QAAQC,IAAI,oCAEL,2BACAvD,GAAK,IACRiV,aAAa,IAGrB,KAAKR,GAGD,OAFAnR,QAAQC,IAAI,mCAEL,2BACAvD,GAAK,IACRiV,aAAa,EACbsE,MAAOG,EAAOzT,UAGtB,KAAK0O,GAGD,OAFArR,QAAQC,IAAI,6BAEL2U,GAEX,KAAKtD,GACDtR,QAAQC,IAAI,mCAEZ,MAAsCmW,EAAOzT,QAArCkO,EAAM,EAANA,OAAQiB,EAAK,EAALA,MAAOC,EAAU,EAAVA,WAEvB,OAAO,2BACArV,GAAK,IACRmU,OAAQA,EACRiB,MAAOA,EACPC,WAAYA,IAGpB,QACI,OAAOrV,M,eEhCbiY,GAAY,CAChB6B,OAAQvF,GACRwF,SAAUvF,GACVwF,UAAWvF,GACXwF,UAAWvF,GACXwF,aAAcvF,GACdwF,YAAavF,GACbwF,cjBvB6B,mBiB+BzBC,IAJc,kBAAXC,QAAuBA,OAAOC,qCACjCD,OAAOC,qCAAqC,IAC5CC,MAE4BC,aAAgBC,MRjCjB1C,GrCSV,yCqCTiBC,GQiC0CA,GRhCzE,SAAAvZ,GACL,IAAIic,EAAS,KACTC,GAAc,EACdC,EAAiB,EAErB,OAAO,SAAAC,GAAI,OAAI,SAAApB,GACb,IAAQ5T,EAAapH,EAAboH,SACAlJ,EAAkB8c,EAAlB9c,KAAMqJ,EAAYyT,EAAZzT,QACN6T,EAAqF7B,GAArF6B,OAAQC,EAA6E9B,GAA7E8B,SAAUC,EAAmE/B,GAAnE+B,UAAWC,EAAwDhC,GAAxDgC,UAAWC,EAA6CjC,GAA7CiC,aAAcC,EAA+BlC,GAA/BkC,YAAaC,EAAkBnC,GAAlBmC,cAe3E,GAbIxd,IAASkd,GACXxW,QAAQC,IAAI,iCACZoX,EAAS,IAAII,UAAU,GAAD,OAAI/C,IAAK,OAAG/R,IAClC2U,GAAc,GACLhe,IAASqd,GAAaU,IAC/BrX,QAAQC,IAAI,kCACZqX,GAAc,EACdI,aAAaH,GACbA,EAAiB,EAEjBF,EAAOM,MAAM,IAAM,kBAGjBN,IACFA,EAAOO,OAAS,SAAAzd,GACdqI,EAAS,CAAElJ,KAAMmd,KAEnBY,EAAOQ,QAAU,SAAA1d,GACf6F,QAAQC,IAAI,cAAe9F,IAE7Bkd,EAAOS,UAAY,SAAA3d,GACjB,IAAQuI,EAASvI,EAATuI,KACFqV,EAAaxX,KAAKyX,MAAMtV,GACVuV,GAAmBF,EAA/B/E,QAA0B,YAAK+E,EAAU,KAEjDvV,EAAS,CAAElJ,KAAMud,EAAalU,QAASsV,KAEzCZ,EAAOa,QAAU,SAAA/d,GACI,MAAfA,EAAM2G,OACRd,QAAQC,IAAI,cAAe9F,GAC3BqI,EAAS,CAAElJ,KAAMod,EAAW/T,QAASxI,EAAM2G,KAAKyL,cAGlD/J,EAAS,CAAElJ,KAAMsd,IAEbU,IACF9U,EAASa,MAETkU,EAAiBP,OAAOmB,YAAW,WACjCnY,QAAQC,IAAI,0BACZuC,EAASgP,GAAqBnT,EAAU,aACvC,OAGH/E,IAASwd,GAAe,CAC1B,IAAMjG,EAAM,eAAQlO,GAEpB0U,EAAOe,KAAK7X,KAAKC,UAAUqQ,IAI/B2G,EAAKpB,SQ3BLhb,GAAQid,aAAYnC,GAAaa,IAGvCvc,IAAS8d,OACP,cAAC,IAAMC,WAAU,UACf,cAAC,IAAa,UACZ,cAAC,IAAQ,CAACnd,MAAOA,GAAM,SACrB,cAAC6Y,GAAG,UAIR5Z,SAASS,eAAe,U,mBCjD5BvC,EAAOC,QAAU,CAAC,UAAY,8BAA8B,YAAc,gCAAgC,UAAY,8BAA8B,KAAO,yBAAyB,SAAW,6BAA6B,UAAY,8BAA8B,WAAa,+BAA+B,SAAW,+B,mBCA7TD,EAAOC,QAAU,CAAC,QAAU,8BAA8B,YAAc,kCAAkC,gBAAkB,sCAAsC,SAAW,+BAA+B,uBAAyB,6CAA6C,gBAAkB,sCAAsC,UAAY,gCAAgC,MAAQ,4BAA4B,OAAS,6BAA6B,mBAAqB,2C,mBCArdD,EAAOC,QAAU,CAAC,OAAS,0BAA0B,QAAU,2BAA2B,KAAO,wBAAwB,KAAO,wBAAwB,WAAa,8BAA8B,YAAc,iC,mBCAjND,EAAOC,QAAU,CAAC,QAAU,mCAAmC,KAAO,gCAAgC,KAAO,gCAAgC,aAAe,wCAAwC,gBAAkB,6C,mBCAtND,EAAOC,QAAU,CAAC,QAAU,mCAAmC,cAAgB,yCAAyC,YAAc,uCAAuC,eAAiB,0CAA0C,oBAAsB,+CAA+C,qCAAuC,gEAAgE,qCAAuC,gEAAgE,UAAY,qCAAqC,WAAa,wC,mBCAzjBD,EAAOC,QAAU,CAAC,aAAe,iCAAiC,KAAO,yBAAyB,SAAW,6BAA6B,eAAiB,qC,mBCA3JD,EAAOC,QAAU,CAAC,UAAY,yBAAyB,YAAc,2BAA2B,mBAAqB,kCAAkC,iBAAmB,gCAAgC,WAAa,0BAA0B,KAAO,oBAAoB,SAAW,0B,mBCAvRD,EAAOC,QAAU,CAAC,QAAU,mCAAmC,MAAQ,iCAAiC,eAAiB,0CAA0C,mBAAqB,gD,mBCAxLD,EAAOC,QAAU,CAAC,UAAY,gCAAgC,GAAK,yBAAyB,GAAK,yBAAyB,GAAK,yBAAyB,gBAAkB,wC,mBCA1KD,EAAOC,QAAU,CAAC,QAAU,4BAA4B,MAAQ,0BAA0B,WAAa,+BAA+B,KAAO,2B,kBCA7ID,EAAOC,QAAU,CAAC,KAAO,2BAA2B,UAAY,gCAAgC,KAAO,2BAA2B,gBAAkB,sCAAsC,eAAiB,qCAAqC,qBAAuB,2CAA2C,WAAa,iCAAiC,gBAAkB,wC,mBCAlXD,EAAOC,QAAU,CAAC,eAAiB,8BAA8B,iBAAmB,gCAAgC,YAAc,6B,mBCAlID,EAAOC,QAAU,CAAC,cAAgB,sCAAsC,MAAQ,8BAA8B,QAAU,kC,mBCAxHD,EAAOC,QAAU,CAAC,QAAU,2BAA2B,OAAS,0BAA0B,MAAQ,2B,mBCAlGD,EAAOC,QAAU,CAAC,SAAW,wCAAwC,YAAc,6C,mBCAnFD,EAAOC,QAAU,CAAC,UAAY,+BAA+B,iBAAmB,wC,mBCAhFD,EAAOC,QAAU,CAAC,UAAY,8BAA8B,oBAAsB,0C,mBCAlFD,EAAOC,QAAU,CAAC,KAAO,yBAAyB,KAAO,2B,mBCAzDD,EAAOC,QAAU,CAAC,UAAY,4BAA4B,oBAAsB,yC","file":"static/js/main.f3faf81f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"App_page__3HJe6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"ModalOverlay_overlay__5_OFp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"MainPage_main__HEng4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"superLarge\":\"Loader_superLarge__Y_P10\",\"large\":\"Loader_large__1f0vy\",\"medium\":\"Loader_medium__1YeUQ\",\"small\":\"Loader_small__3LO_K\",\"wrapper_superLarge\":\"Loader_wrapper_superLarge__3fa3s\",\"wrapper_large\":\"Loader_wrapper_large__1eIYS\",\"wrapper_medium\":\"Loader_wrapper_medium__YMSlM\",\"wrapper_small\":\"Loader_wrapper_small__3nPlX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonGroup\":\"ProfileForm_buttonGroup__3q9j1\"};","import React from 'react';\r\nimport styles from './AppHeader.module.css';\r\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link, NavLink, useLocation } from 'react-router-dom';\r\n\r\nfunction AppHeader() {\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <header className={styles.header}>\r\n      <div className={styles.content}>\r\n\r\n        <nav>\r\n          <ul className={styles.list}>\r\n            <li className='mt-4 mr-7 mb-4 ml-5'>\r\n              <NavLink to='/' exact={true} className={styles.link} activeClassName={styles.activeLink}>\r\n                <BurgerIcon type={location.pathname === '/' ? 'primary' : 'secondary'} />\r\n                <p className='text text_type_main-default ml-2'>Конструктор</p>\r\n              </NavLink>\r\n            </li>\r\n            <li className='mt-4 mr-5 mb-4 ml-5'>\r\n              <NavLink to='/feed' className={styles.link} activeClassName={styles.activeLink}>\r\n                <ListIcon type={location.pathname === '/feed' ? 'primary' : 'secondary'} />\r\n                <p className='text text_type_main-default ml-2'>Лента заказов</p>\r\n              </NavLink>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n\r\n        <Link to='/'>\r\n          <Logo />\r\n        </Link>\r\n\r\n        <nav className={styles.personalCab}>\r\n          <ul className={styles.list}>\r\n            <li className='mt-4 mr-5 mb-4 ml-5'>\r\n              <NavLink to='/profile' className={styles.link} activeClassName={styles.activeLink}>\r\n                <ProfileIcon type={location.pathname === '/profile' ? 'primary' : 'secondary'} />\r\n                <p className='text text_type_main-default ml-2'>Личный кабинет</p>\r\n              </NavLink>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default AppHeader;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport modalOverlayStyles from './ModalOverlay.module.css';\r\n\r\n\r\n\r\nfunction ModalOverlay({onClick}) {\r\n  return (\r\n    <div className={modalOverlayStyles.overlay} onClick={onClick}>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nModalOverlay.propTypes = {\r\n  onClick: PropTypes.func.isRequired\r\n}\r\n\r\n\r\n\r\nexport default ModalOverlay;\r\n","import React from 'react';\r\nimport { useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport modalStyles from './Modal.module.css';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport ModalOverlay from '../ModalOverlay/ModalOverlay';\r\n\r\n\r\n\r\nfunction Modal({ children, onClose, title = \"\" }) {\r\n\r\n  useEffect(() => {\r\n    const closeByEsc = (event) => {\r\n      if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', closeByEsc);\r\n\r\n    return () => document.removeEventListener('keydown', closeByEsc);\r\n  }, []);\r\n\r\n\r\n\r\n  return ReactDOM.createPortal(\r\n    (\r\n      <>\r\n        <div className={modalStyles.modalContainer}>\r\n          <div className={`${modalStyles.titleButtonGroup} pt-10 pl-10 pr-10`}>\r\n            <h2 className='text text_type_main-large'>{title}</h2>\r\n            <button className={`${modalStyles.closeButton}`} onClick={onClose}>\r\n              <CloseIcon type=\"primary\" />\r\n            </button>\r\n          </div>\r\n          {children}\r\n        </div>\r\n        <ModalOverlay onClick={onClose} />\r\n      </>\r\n    ), document.getElementById('react-modals'));\r\n}\r\n\r\n\r\n\r\nModal.propTypes = {\r\n  children: PropTypes.element.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  title: PropTypes.string\r\n}\r\n\r\n\r\n\r\nexport default Modal;\r\n","import styles from './IngredientDetails.module.css';\r\nimport { useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\n\r\n\r\n\r\nfunction IngredientDetails() {\r\n  const { id } = useParams();\r\n  const { allIngredients } = useSelector(store => store.allIngredients);\r\n  const ingredientData = allIngredients?.find(item => item._id === id);\r\n\r\n  if (!ingredientData) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.content}>\r\n      <img src={ingredientData.image_large} alt={ingredientData.name} className={styles.image} />\r\n      <h3 className=\"text text_type_main-medium mt-4\">{ingredientData.name}</h3>\r\n\r\n      <ul className={`${styles.propertiesList} mt-8`}>\r\n        <li className={`${styles.propertiesListItem} mr-5`}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">Калории,&nbsp;ккал</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{ingredientData.calories}</p>\r\n        </li>\r\n        <li className={`${styles.propertiesListItem} mr-5`}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">Белки,&nbsp;г</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{ingredientData.proteins}</p>\r\n        </li>\r\n        <li className={`${styles.propertiesListItem} mr-5`}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">Жиры,&nbsp;г</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{ingredientData.fat}</p>\r\n        </li>\r\n        <li className={styles.propertiesListItem}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">Углеводы,&nbsp;г</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{ingredientData.carbohydrates}</p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default IngredientDetails;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Redirect, Route, useLocation } from 'react-router-dom';\r\n\r\n\r\n\r\nexport function ProtectedRoute({ onlyUnAuth, children, ...rest }) {\r\n  const { user } = useSelector(store => store.auth);\r\n  const location = useLocation();\r\n\r\n  if (onlyUnAuth && user) {\r\n    const { from } = location.state || { from: { pathname: '/' } };\r\n\r\n    return (\r\n      <Route {...rest}>\r\n        <Redirect to={from} />\r\n      </Route>\r\n    );\r\n  }\r\n\r\n  if (!onlyUnAuth && !user) {\r\n    return (\r\n      <Route {...rest}>\r\n        <Redirect to={{ pathname: '/login', state: { from: location } }} />\r\n      </Route>\r\n    );\r\n  }\r\n\r\n  return <Route {...rest}>\r\n    {children}\r\n  </Route>;\r\n\r\n}\r\n","export const API_PATH_INGREDIENTS = 'https://norma.nomoreparties.space/api/ingredients';\r\nexport const API_PATH_ORDERS = 'https://norma.nomoreparties.space/api/orders';\r\n\r\nexport const API_PATH_AUTH_SIGNUP = 'https://norma.nomoreparties.space/api/auth/register';\r\nexport const API_PATH_AUTH_SIGNIN = 'https://norma.nomoreparties.space/api/auth/login';\r\nexport const API_PATH_AUTH_SIGNOUT = 'https://norma.nomoreparties.space/api/auth/logout';\r\nexport const API_PATH_AUTH_USER = 'https://norma.nomoreparties.space/api/auth/user';\r\n\r\nexport const API_PATH_TOKEN_UPDATE = 'https://norma.nomoreparties.space/api/auth/token';\r\n\r\nexport const API_PATH_PASSWORD_FORGOT = 'https://norma.nomoreparties.space/api/password-reset';\r\nexport const API_PATH_PASSWORD_RESET = 'https://norma.nomoreparties.space/api/password-reset/reset';\r\n\r\nexport const WS_URL =  'wss://norma.nomoreparties.space/orders';\r\n\r\nexport const TOTAL_PRICE_INITIAL_STATE = { totalPrice: 0 };\r\nexport const ACTION_TYPE_SUM = 'sum';\r\nexport const ACTION_TYPE_RESET = 'reset';\r\nexport const INGREDIENT_TYPE_BUN = 'bun';\r\nexport const USE_IN_VIEW_OPTIONS = { threshold: 0.1 };\r\n\r\nexport const INGREDIENT_ICON_VIEWED_IN_ORDER_CARD_MAX = 5;\r\n","export function setCookie(name, value, props) {\r\n  props = props || {};\r\n  let exp = props.expires;\r\n\r\n  if (typeof exp == 'number' && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n\r\n  if (exp && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + '=' + value;\r\n\r\n  for (const propName in props) {\r\n    updatedCookie += '; ' + propName;\r\n    const propValue = props[propName];\r\n\r\n    if (propValue !== true) {\r\n      updatedCookie += '=' + propValue;\r\n    }\r\n  }\r\n\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function getCookie(name) {\r\n  const matches = document.cookie.match(\r\n    new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\r\n  );\r\n\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport function deleteCookie(name) {\r\n  setCookie(name, null, { expires: -1 });\r\n}\r\n","import {\r\n  API_PATH_ORDERS,\r\n  API_PATH_INGREDIENTS,\r\n  API_PATH_AUTH_SIGNUP,\r\n  API_PATH_AUTH_SIGNIN,\r\n  API_PATH_AUTH_SIGNOUT,\r\n  API_PATH_AUTH_USER,\r\n  API_PATH_PASSWORD_FORGOT,\r\n  API_PATH_PASSWORD_RESET,\r\n  API_PATH_TOKEN_UPDATE\r\n} from '../utils/constants';\r\nimport { getCookie, setCookie } from '../utils/cookie';\r\n\r\n\r\n\r\nconst checkReponse = (res) => {\r\n  return res.ok ? res.json() : res.json().then((err) => Promise.reject(err));\r\n};\r\n\r\nconst fetchWithRefresh = async (url, options) => {\r\n  try {\r\n    const res = await fetch(url, options); //делаем запрос\r\n\r\n    return await checkReponse(res);\r\n  } catch (err) {\r\n    if (err.message === \"jwt expired\") {\r\n      const {accessToken, refreshToken } = await updateTokenRequest(); //обновляем токены\r\n\r\n      setCookie('token', accessToken.split('Bearer ')[1]);\r\n      localStorage.setItem('refreshToken', refreshToken);\r\n      console.log('Access and refresh tokens update successfully!');\r\n\r\n      options.headers.authorization = accessToken;\r\n\r\n      const res = await fetch(url, options); //вызываем перезапрос данных\r\n\r\n      return await checkReponse(res);\r\n    } else {\r\n      return Promise.reject(err);\r\n    }\r\n  }\r\n};\r\n\r\n\r\nexport async function getOrderDataRequest(ingredientsId) {\r\n  return await fetchWithRefresh(API_PATH_ORDERS, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      authorization: 'Bearer ' + getCookie('token')\r\n    },\r\n    body: JSON.stringify({ ingredients: ingredientsId })\r\n  })\r\n};\r\n\r\nexport async function getAllIngredientsRequest() {\r\n  return await fetchWithRefresh(API_PATH_INGREDIENTS);\r\n};\r\n\r\nexport async function signUpUserRequest(email, password, name) {\r\n  return await fetchWithRefresh(API_PATH_AUTH_SIGNUP, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ email: email, password: password, name: name })\r\n  });\r\n};\r\n\r\nexport async function signInUserRequest(email, password) {\r\n  return await fetchWithRefresh(API_PATH_AUTH_SIGNIN, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ email: email, password: password })\r\n  });\r\n};\r\n\r\nexport async function signOutUserRequest() {\r\n  return await fetchWithRefresh(API_PATH_AUTH_SIGNOUT, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ token: localStorage.getItem('refreshToken') })\r\n  });\r\n};\r\n\r\nexport async function forgotPasswordRequest(email) {\r\n  return await fetchWithRefresh(API_PATH_PASSWORD_FORGOT, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ email: email })\r\n  });\r\n};\r\n\r\nexport async function resetPasswordRequest(password, code) {\r\n  return await fetchWithRefresh(API_PATH_PASSWORD_RESET, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ password: password, token: code })\r\n  });\r\n};\r\n\r\nexport async function getUserDataRequest() {\r\n  return await fetchWithRefresh(API_PATH_AUTH_USER, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      authorization: 'Bearer ' + getCookie('token')\r\n    }\r\n  });\r\n};\r\n\r\nexport async function refreshUserDataRequest(email, name, password) {\r\n  return await fetchWithRefresh(API_PATH_AUTH_USER, {\r\n    method: 'PATCH',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      authorization: 'Bearer ' + getCookie('token')\r\n    },\r\n    body: JSON.stringify({ name: name, email: email, password: password })\r\n  });\r\n};\r\n\r\nexport async function updateTokenRequest() {\r\n  return await fetchWithRefresh(API_PATH_TOKEN_UPDATE, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ token: localStorage.getItem('refreshToken') })\r\n  });\r\n};\r\n","import {\r\n  signUpUserRequest,\r\n  signInUserRequest,\r\n  signOutUserRequest,\r\n  forgotPasswordRequest,\r\n  resetPasswordRequest,\r\n  getUserDataRequest,\r\n  refreshUserDataRequest,\r\n  updateTokenRequest\r\n} from '../../utils/api';\r\n\r\nexport const REGISTRATION_USER_REQUEST = 'REGISTRATION_USER_REQUEST';\r\nexport const REGISTRATION_USER_SUCCESS = 'REGISTRATION_USER_SUCCESS';\r\nexport const REGISTRATION_USER_FAILED = 'REGISTRATION_USER_FAILED';\r\n\r\nexport const LOGIN_USER_REQUEST = 'LOGIN_USER_REQUEST';\r\nexport const LOGIN_USER_SUCCESS = 'LOGIN_USER_SUCCESS';\r\nexport const LOGIN_USER_FAILED = 'LOGIN_USER_FAILED';\r\n\r\nexport const LOGOUT_USER_REQUEST = 'LOGOUT_USER_REQUEST';\r\nexport const LOGOUT_USER_SUCCESS = 'LOGOUT_USER_SUCCESS';\r\nexport const LOGOUT_USER_FAILED = 'LOGOUT_USER_FAILED';\r\n\r\nexport const FORGOT_PASSWORD_REQUEST = 'FORGOT_PASSWORD_REQUEST';\r\nexport const FORGOT_PASSWORD_SUCCESS = 'FORGOT_PASSWORD_SUCCESS';\r\nexport const FORGOT_PASSWORD_FAILED = 'FORGOT_PASSWORD_FAILED';\r\n\r\nexport const RESET_PASSWORD_REQUEST = 'RESET_PASSWORD_REQUEST';\r\nexport const RESET_PASSWORD_SUCCESS = 'RESET_PASSWORD_SUCCESS';\r\nexport const RESET_PASSWORD_FAILED = 'RESET_PASSWORD_FAILED';\r\n\r\nexport const GET_USERDATA_REQUEST = 'GET_USERDATA_REQUEST';\r\nexport const GET_USERDATA_SUCCESS = 'GET_USERDATA_SUCCESS';\r\nexport const GET_USERDATA_FAILED = 'GET_USERDATA_FAILED';\r\n\r\nexport const REFRESH_USERDATA_REQUEST = 'REFRESH_USERDATA_REQUEST';\r\nexport const REFRESH_USERDATA_SUCCESS = 'REFRESH_USERDATA_SUCCESS';\r\nexport const REFRESH_USERDATA_FAILED = 'REFRESH_USERDATA_FAILED';\r\n\r\nexport const UPDATE_TOKEN_REQUEST = 'UPDATE_TOKEN_REQUEST';\r\nexport const UPDATE_TOKEN_SUCCESS = 'UPDATE_TOKEN_SUCCESS';\r\nexport const UPDATE_TOKEN_FAILED = 'UPDATE_TOKEN_FAILED';\r\n\r\nexport function registerUser(email, password, name) {\r\n  return function (dispatch) {\r\n    dispatch({ type: REGISTRATION_USER_REQUEST });\r\n\r\n    signUpUserRequest(email, password, name)\r\n      .then(data => dispatch({ type: REGISTRATION_USER_SUCCESS, payload: data }))\r\n      .catch(err => dispatch({ type: REGISTRATION_USER_FAILED, payload: err }));\r\n  }\r\n};\r\n\r\nexport function loginUser(email, password) {\r\n  return function (dispatch) {\r\n    dispatch({ type: LOGIN_USER_REQUEST });\r\n\r\n    signInUserRequest(email, password)\r\n      .then(data => dispatch({ type: LOGIN_USER_SUCCESS, payload: data }))\r\n      .catch(err => dispatch({ type: LOGIN_USER_FAILED, payload: err }));\r\n  }\r\n};\r\n\r\nexport function logoutUser() {\r\n  return function (dispatch) {\r\n    dispatch({ type: LOGOUT_USER_REQUEST });\r\n\r\n    signOutUserRequest()\r\n      .then(data => dispatch({ type: LOGOUT_USER_SUCCESS, payload: data }))\r\n      .catch(err => dispatch({ type: LOGOUT_USER_FAILED, payload: err }));\r\n  }\r\n};\r\n\r\nexport function forgotPassword(email) {\r\n  return function (dispatch) {\r\n    dispatch({ type: FORGOT_PASSWORD_REQUEST });\r\n\r\n    forgotPasswordRequest(email)\r\n      .then(data => dispatch({ type: FORGOT_PASSWORD_SUCCESS, payload: data }))\r\n      .catch(err => dispatch({ type: FORGOT_PASSWORD_FAILED, payload: err }));\r\n  }\r\n};\r\n\r\nexport function resetPassword(password, code) {\r\n  return function (dispatch) {\r\n    dispatch({ type: RESET_PASSWORD_REQUEST });\r\n\r\n    resetPasswordRequest(password, code)\r\n      .then(data => dispatch({ type: RESET_PASSWORD_SUCCESS, payload: data }))\r\n      .catch(err => dispatch({ type: RESET_PASSWORD_FAILED, payload: err }));\r\n  }\r\n};\r\n\r\nexport function getUserData() {\r\n  return function (dispatch) {\r\n    dispatch({ type: GET_USERDATA_REQUEST });\r\n\r\n    getUserDataRequest()\r\n      .then(data => dispatch({ type: GET_USERDATA_SUCCESS, payload: data }))\r\n      .catch(err => dispatch({ type: GET_USERDATA_FAILED, payload: err }));\r\n  }\r\n};\r\n\r\nexport function refreshUserData(email, name, password) {\r\n  return function (dispatch) {\r\n    dispatch({ type: REFRESH_USERDATA_REQUEST });\r\n\r\n    refreshUserDataRequest(email, name, password)\r\n      .then(data => dispatch({ type: REFRESH_USERDATA_SUCCESS, payload: data }))\r\n      .catch(err => dispatch({ type: REFRESH_USERDATA_FAILED, payload: err }));\r\n  }\r\n};\r\n\r\nexport function updateToken() {\r\n  return function (dispatch) {\r\n    dispatch({ type: UPDATE_TOKEN_REQUEST });\r\n\r\n    updateTokenRequest()\r\n      .then(data => dispatch({ type: UPDATE_TOKEN_SUCCESS, payload: data }))\r\n      .catch(err => dispatch({ type: UPDATE_TOKEN_FAILED, payload: err }));\r\n  }\r\n};\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from \"react-redux\";\r\nimport commonStyles from './commonStyles.module.css';\r\nimport { Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link } from 'react-router-dom';\r\nimport { loginUser } from '../services/actions/auth';\r\n\r\n\r\n\r\nexport function LoginPage() {\r\n  const dispatch = useDispatch();\r\n\r\n  const [emailValue, setEmailValue] = useState('');\r\n  const [passwordValue, setPasswordValue] = useState('');\r\n\r\n  const onFormSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    dispatch(loginUser(emailValue, passwordValue));\r\n  }\r\n\r\n\r\n  return (\r\n    <main className={commonStyles.main}>\r\n\r\n      <div className={commonStyles.container}>\r\n        <h1 className=\"text text_type_main-medium\">Вход</h1>\r\n\r\n        <form className={commonStyles.form} onSubmit={onFormSubmit}>\r\n          <Input\r\n            value={emailValue}\r\n            type={'email'}\r\n            placeholder={'E-mail'}\r\n            onChange={e => setEmailValue(e.target.value)}\r\n            extraClass='mt-6 mb-6'\r\n          />\r\n          <PasswordInput value={passwordValue} onChange={e => setPasswordValue(e.target.value)} />\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"medium\"\r\n            extraClass='mt-6 mb-20'\r\n            disabled={!emailValue || !passwordValue} >\r\n            Войти\r\n          </Button>\r\n        </form>\r\n\r\n        <div className={`${commonStyles.navigationBlock} mb-4`}>\r\n          <p className='text text_type_main-default text_color_inactive'>\r\n            Вы - новый пользователь? <Link to=\"/register\" className={commonStyles.navigationLink}>Зарегистрироваться</Link>\r\n          </p>\r\n        </div>\r\n\r\n        <div className={`${commonStyles.navigationBlock}`}>\r\n          <p className='text text_type_main-default text_color_inactive'>\r\n            Забыли пароль? <Link className={commonStyles.navigationLink} to=\"/forgot-password\">Восстановить пароль</Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n    </main>\r\n  )\r\n}\r\n","import PropTypes from 'prop-types';\r\n\r\nconst ingredientType = {\r\n    name: PropTypes.string,\r\n    price: PropTypes.number,\r\n    image: PropTypes.string,\r\n    image_large: PropTypes.string,\r\n    calories: PropTypes.number,\r\n    proteins: PropTypes.number,\r\n    fat: PropTypes.number,\r\n    carbohydrates: PropTypes.number\r\n};\r\n\r\n/* {\r\n    data: PropTypes.shape({\r\n      name: PropTypes.string.isRequired,\r\n      price: PropTypes.number.isRequired,\r\n      image: PropTypes.string.isRequired,\r\n      image_large: PropTypes.string.isRequired,\r\n      calories: PropTypes.number.isRequired,\r\n      proteins: PropTypes.number.isRequired,\r\n      fat: PropTypes.number.isRequired,\r\n      carbohydrates: PropTypes.number.isRequired\r\n    }).isRequired\r\n  }; */\r\n\r\nexport default ingredientType;","import React, { useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Ingredient.module.css';\r\nimport { Counter, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport ingredientType from '../../utils/types';\r\nimport { useDrag } from \"react-dnd\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link, useLocation } from 'react-router-dom';\r\n\r\n\r\n\r\nfunction Ingredient({ data, onClick }) {\r\n  const location = useLocation();\r\n\r\n  const bunItem = useSelector(store => store.constructorIngredients.bun);\r\n  const stuffingItems = useSelector(store => store.constructorIngredients.stuffing);\r\n\r\n  const counter = useMemo(() =>\r\n    () => {\r\n      let res = 0;\r\n\r\n      if (data.type === 'bun') {\r\n        if (bunItem._id === data._id) {\r\n          res = 2;\r\n        }\r\n      } else {\r\n        stuffingItems.forEach(item => {\r\n          if (item._id === data._id) res++;\r\n        });\r\n      }\r\n\r\n      return res;\r\n    }, [bunItem, stuffingItems]);\r\n\r\n  const [{ opacity }, dragRef] = useDrag({\r\n    type: \"ingredients\",\r\n    item: data,\r\n    collect: (monitor) => ({\r\n      opacity: monitor.isDragging() ? 0.3 : 1\r\n    }),\r\n  });\r\n\r\n\r\n\r\n  return (\r\n    <Link to={{ pathname: `/ingredients/${data._id}`, state: { background: location } }} className={styles.link}>\r\n      <li\r\n        className={`${styles.content} ml-2`}\r\n        onClick={onClick}\r\n        ref={dragRef}\r\n        style={{ opacity }}\r\n      >\r\n        {(counter() !== 0) && <Counter count={counter()} size=\"default\" />}\r\n        <img src={data.image} alt={data.name} className={styles.image} />\r\n\r\n        <div className={`${styles.priceGroup} mt-2 mb-2`}>\r\n          <p className=\"text text_type_digits-default mr-2\">{data.price}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n\r\n        <p className='text text_type_main-default'>{data.name}</p>\r\n      </li>\r\n    </Link>\r\n  );\r\n}\r\n\r\n\r\n\r\nIngredient.propTypes = { data: PropTypes.shape(ingredientType).isRequired };\r\n\r\n\r\n\r\nexport default Ingredient;\r\n","export const LoaderSvg = ({ color = '#3C39EC', size }) => {\r\n  return (\r\n    <svg\r\n      width={size}\r\n      height={size}\r\n      viewBox=\"0 0 38 38\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      stroke={color}\r\n    >\r\n      <g fill=\"none\" fillRule=\"evenodd\">\r\n        <g transform=\"translate(1 1)\" strokeWidth=\"2\">\r\n          <circle strokeOpacity=\".5\" cx=\"18\" cy=\"18\" r=\"18\" />\r\n          <path d=\"M36 18c0-9.94-8.06-18-18-18\">\r\n            <animateTransform\r\n              attributeName=\"transform\"\r\n              type=\"rotate\"\r\n              from=\"0 18 18\"\r\n              to=\"360 18 18\"\r\n              dur=\"1s\"\r\n              repeatCount=\"indefinite\"\r\n            />\r\n          </path>\r\n        </g>\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n","import style from './Loader.module.css';\r\nimport { LoaderSvg } from './LoaderSvg';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst loaderSizes = {\r\n  small: 16,\r\n  medium: 24,\r\n  large: 40,\r\n  superLarge: 100\r\n};\r\n\r\n\r\nconst Loader = ({ size }) => {\r\n  const loaderColor = '#3C39EC';\r\n  const wrapperStyleKey = 'wrapper_' + size;\r\n\r\n  return (\r\n    <div className={style[wrapperStyleKey]}>\r\n      <LoaderSvg color={loaderColor} size={loaderSizes[size]} />\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\nLoader.propTypes = { size: PropTypes.string.isRequired };\r\n\r\n\r\n\r\nexport default Loader;\r\n","export const SET_MODAL = 'SET_MODAL';\r\nexport const RESET_MODAL = 'RESET_MODAL';\r\n","import React, { useEffect, useCallback } from 'react';\r\nimport burgerIngredientsStyles from './BurgerIngredients.module.css';\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport Ingredient from '../Ingredient/Ingredient';\r\nimport Loader from '../Loader/Loader';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useInView } from 'react-intersection-observer';\r\nimport { USE_IN_VIEW_OPTIONS } from '../../utils/constants';\r\nimport { SET_MODAL } from '../../services/actions/modal';\r\n\r\n\r\n\r\nfunction BurgerIngredients() {\r\n  const dispatch = useDispatch();\r\n\r\n  const [current, setCurrent] = React.useState('bunTab');\r\n  const { allIngredients, allIngredientsRequest } = useSelector(store => store.allIngredients);\r\n\r\n  const getViewedIngredientData = useCallback(() => {\r\n    dispatch({ type: SET_MODAL, payload: { content: 'ingredient' } });\r\n  }, [dispatch]);\r\n\r\n  const getFilteredIngredients = (data, filterCondition) => {\r\n    const filtered = data.filter(item => item.type === filterCondition);\r\n\r\n    return filtered.map(item =>\r\n      <Ingredient\r\n        data={item}\r\n        key={item._id}\r\n        onClick={() => { getViewedIngredientData() }}\r\n      />);\r\n  };\r\n\r\n\r\n  const [bunListItemRef, bunListItemInView] = useInView(USE_IN_VIEW_OPTIONS);\r\n  const [sauceListItemRef, sauceListItemInView] = useInView(USE_IN_VIEW_OPTIONS);\r\n  const [mainListItemRef, mainListItemInView] = useInView(USE_IN_VIEW_OPTIONS);\r\n\r\n  const inViewHandler = () => {\r\n    switch (true) {\r\n      case bunListItemInView: {\r\n        setCurrent('bunTab');\r\n        break;\r\n      }\r\n      case sauceListItemInView: {\r\n        setCurrent('sauceTab');\r\n        break;\r\n      }\r\n      case mainListItemInView: {\r\n        setCurrent('mainTab');\r\n        break;\r\n      }\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    inViewHandler();\r\n  }, [bunListItemInView, sauceListItemInView, mainListItemInView]);\r\n\r\n  return (\r\n    <section className={burgerIngredientsStyles.section}>\r\n\r\n      <h1 className='text text_type_main-large mt-10'>Соберите бургер</h1>\r\n\r\n      <div className={`${burgerIngredientsStyles.tabs} mt-5 mb-10`}>\r\n        <a href='#bunListItem' className={burgerIngredientsStyles.link}>\r\n          <Tab value='bunTab' active={current === 'bunTab'} onClick={setCurrent}>\r\n            Булки\r\n          </Tab>\r\n        </a>\r\n        <a href='#sauceListItem' className={burgerIngredientsStyles.link}>\r\n          <Tab value='sauceTab' active={current === 'sauceTab'} onClick={setCurrent}>\r\n            Соусы\r\n          </Tab>\r\n        </a>\r\n        <a href='#mainListItem' className={burgerIngredientsStyles.link}>\r\n          <Tab value='mainTab' active={current === 'mainTab'} onClick={setCurrent}>\r\n            Начинки\r\n          </Tab>\r\n        </a>\r\n      </div>\r\n\r\n      {allIngredientsRequest ? (<Loader size='superLarge' />)\r\n        : (\r\n          <ul className={burgerIngredientsStyles.categoryList} >\r\n            <li id='bunListItem' ref={bunListItemRef}>\r\n              <h2 className='text text_type_main-medium'>Булки</h2>\r\n              <ul className={`${burgerIngredientsStyles.ingredientsList} mt-6 mb-10`}>\r\n                {getFilteredIngredients(allIngredients, 'bun')}\r\n              </ul>\r\n            </li>\r\n            <li id='sauceListItem' ref={sauceListItemRef}>\r\n              <h2 className='text text_type_main-medium'>Соусы</h2>\r\n              <ul className={`${burgerIngredientsStyles.ingredientsList} mt-6 mb-10`}>\r\n                {getFilteredIngredients(allIngredients, 'sauce')}\r\n              </ul>\r\n            </li>\r\n            <li id='mainListItem' ref={mainListItemRef}>\r\n              <h2 className=\"text text_type_main-medium\">Начинки</h2>\r\n              <ul className={`${burgerIngredientsStyles.ingredientsList} mt-6 mb-10`}>\r\n                {getFilteredIngredients(allIngredients, 'main')}\r\n              </ul>\r\n            </li>\r\n          </ul>\r\n        )}\r\n    </section>\r\n  );\r\n}\r\n\r\n\r\nexport default BurgerIngredients;\r\n","export const ADD_BUN_TO_CONSTRUCTOR = 'ADD_BUN_TO_CONSTRUCTOR';\r\nexport const ADD_STUFFING_ELEMENT_TO_CONSTRUCTOR = 'ADD_STUFFING_ELEMENT_TO_CONSTRUCTOR';\r\nexport const DELETE_STUFFING_ELEMENT_FROM_CONSTRUCTOR = 'DELETE_STUFFING_ELEMENT_FROM_CONSTRUCTOR';\r\nexport const REORDER_STUFFING_ELEMENTS = 'REORDER_STUFFING_ELEMENTS';\r\nexport const CONSTRUCTOR_CLEANUP = 'CONSTRUCTOR_CLEANUP';\r\n","import React, { useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport burgerConstructorItemStyles from './BurgerConstructorItem.module.css';\r\nimport ingredientType from '../../utils/types';\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport {\r\n  DELETE_STUFFING_ELEMENT_FROM_CONSTRUCTOR,\r\n  REORDER_STUFFING_ELEMENTS\r\n} from '../../services/actions/constructorIngredients';\r\n\r\n\r\n\r\nfunction BurgerConstructorItem({ data, index }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const { id } = data;\r\n  const dndRef = useRef(null);\r\n\r\n  const deleteItemHandle = (id) => {\r\n    dispatch({ type: DELETE_STUFFING_ELEMENT_FROM_CONSTRUCTOR, id });\r\n  };\r\n\r\n  const [{ opacity }, dragRef] = useDrag({\r\n    type: \"ingredient\",\r\n    item: { id, index },\r\n    collect: (monitor) => ({\r\n      opacity: monitor.isDragging() ? 0.3 : 1\r\n    })\r\n  });\r\n\r\n  const [{ isHover }, dropRef] = useDrop({\r\n    accept: \"ingredient\",\r\n    hover(data) {\r\n      if (!dndRef.current) return;\r\n\r\n      const dragIndex = data.index;\r\n      const dropIndex = index;\r\n\r\n      dispatch({ type: REORDER_STUFFING_ELEMENTS, dragIndex, dropIndex});\r\n\r\n      data.index = dropIndex;\r\n    },\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n    }),\r\n  });\r\n\r\n  dragRef(dropRef(dndRef));\r\n\r\n\r\n\r\n  return (\r\n    <li className={`${burgerConstructorItemStyles.listItem} ${isHover ? burgerConstructorItemStyles.hoveredItem : ''} mb-4 mr-2`}\r\n      ref={dndRef}\r\n      style={{opacity}}\r\n    >\r\n      <DragIcon type=\"primary\" />\r\n      <ConstructorElement text={data.name} price={data.price} thumbnail={data.image} handleClose={() => deleteItemHandle(id)} />\r\n    </li>\r\n  );\r\n}\r\n\r\n\r\n\r\nBurgerConstructorItem.propTypes = {\r\n  data: PropTypes.shape(ingredientType),\r\n  index: PropTypes.number\r\n};\r\n\r\n\r\n\r\nexport default BurgerConstructorItem;\r\n","import { getOrderDataRequest } from '../../utils/api';\r\n\r\nexport const GET_ORDER_DATA_REQUEST = 'GET_ORDER_DATA_REQUEST';\r\nexport const GET_ORDER_DATA_SUCCESS = 'GET_ORDER_DATA_SUCCESS';\r\nexport const GET_ORDER_DATA_FAILED = 'GET_ORDER_DATA_FAILED';\r\n\r\n\r\nexport function getOrderData(ingredientsId) {\r\n  return function (dispatch) {\r\n    dispatch({ type: GET_ORDER_DATA_REQUEST });\r\n\r\n    getOrderDataRequest(ingredientsId)\r\n      .then(data =>\r\n        dispatch({\r\n          type: GET_ORDER_DATA_SUCCESS,\r\n          payload: data\r\n        }))\r\n      .catch(err => {\r\n        console.log(err);\r\n        dispatch({ type: GET_ORDER_DATA_FAILED });\r\n      });\r\n  }\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport burgerConstructorStyles from './BurgerConstructor.module.css';\r\nimport { ConstructorElement, Button, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport BurgerConstructorItem from '../BurgerConstructorItem/BurgerConstructorItem';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n  ADD_BUN_TO_CONSTRUCTOR,\r\n  ADD_STUFFING_ELEMENT_TO_CONSTRUCTOR\r\n} from '../../services/actions/constructorIngredients';\r\nimport { getOrderData } from '../../services/actions/orderData';\r\nimport { useDrop } from \"react-dnd\";\r\nimport { SET_MODAL } from '../../services/actions/modal';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\n\r\nfunction BurgerConstructor() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const { user } = useSelector(store => store.auth);\r\n\r\n  const bunItem = useSelector(store => store.constructorIngredients.bun);\r\n  const stuffingItems = useSelector(store => store.constructorIngredients.stuffing);\r\n  const ingredientsId = useMemo(\r\n    () => [bunItem, ...stuffingItems, bunItem].map(item => item ? item._id : ''),\r\n    [bunItem, stuffingItems]\r\n  );\r\n\r\n  const getOrderDataFromBackend = (idArr) => {\r\n    if (!user) {\r\n      history.push('/login');\r\n    } else {\r\n      dispatch(getOrderData(idArr));\r\n      dispatch({ type: SET_MODAL, payload: { content: 'orderInfo' } });\r\n    }\r\n  };\r\n\r\n  const totalPrice = useMemo(() => {\r\n    return (\r\n      (Object.keys(bunItem).length > 0 ? bunItem.price * 2 : 0) +\r\n      stuffingItems.reduce((sum, curr) => sum + curr.price, 0)\r\n    );\r\n  }, [bunItem, stuffingItems]);\r\n\r\n  const [{ isHover }, dropRef] = useDrop({\r\n    accept: \"ingredients\",\r\n    drop(item) {\r\n      item.type === \"bun\"\r\n        ? dispatch({ type: ADD_BUN_TO_CONSTRUCTOR, payload: item })\r\n        : dispatch({\r\n          type: ADD_STUFFING_ELEMENT_TO_CONSTRUCTOR,\r\n          payload: {\r\n            ...item,\r\n            id: Math.random().toString().slice(2)\r\n          }\r\n        });\r\n    },\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n    }),\r\n  });\r\n\r\n  const chosenPositionsListScroll = stuffingItems && (stuffingItems.length >= 5) ?\r\n    'chosenPositionsList_overflowY_scroll' :\r\n    'chosenPositionsList_overflowY_hidden';\r\n\r\n\r\n\r\n  return (\r\n    <div className={`${burgerConstructorStyles.section} pt-25`}>\r\n\r\n      <ul\r\n        className={`${burgerConstructorStyles.positionsList} ${isHover ? burgerConstructorStyles.hoveredList : ''}`}\r\n        ref={dropRef}\r\n      >\r\n\r\n        <li className={`${burgerConstructorStyles.lockedPosition} ml-8 mr-4 mb-4`}>\r\n          {Object.keys(bunItem).length > 0 &&\r\n            <ConstructorElement\r\n              key={bunItem._id}\r\n              type=\"top\"\r\n              isLocked={true}\r\n              text={`${bunItem.name} (верх)`}\r\n              price={bunItem.price}\r\n              thumbnail={bunItem.image} />}\r\n        </li>\r\n\r\n        <li>\r\n          <ul className={`${burgerConstructorStyles.chosenPositionsList} ${burgerConstructorStyles[chosenPositionsListScroll]}`}>\r\n            {stuffingItems && stuffingItems.map((item, index) =>\r\n              <BurgerConstructorItem data={item} index={index} key={item.id} />\r\n            )}\r\n          </ul>\r\n        </li>\r\n\r\n        <li className={`${burgerConstructorStyles.lockedPosition} mt-4 ml-8 mr-4`}>\r\n          {Object.keys(bunItem).length > 0 &&\r\n            <ConstructorElement\r\n              key={bunItem._id}\r\n              type=\"bottom\"\r\n              isLocked={true}\r\n              text={`${bunItem.name} (низ)`}\r\n              price={bunItem.price}\r\n              thumbnail={bunItem.image} />\r\n          }\r\n        </li>\r\n\r\n      </ul>\r\n\r\n      <div className={`${burgerConstructorStyles.infoGroup} mt-10 mr-4`}>\r\n        <div className={`${burgerConstructorStyles.priceGroup} mr-10`}>\r\n          <p className='text text_type_digits-medium mr-5'>{totalPrice}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n\r\n        <Button\r\n          htmlType=\"button\"\r\n          type=\"primary\"\r\n          size=\"large\"\r\n          disabled={(Object.keys(bunItem).length > 0) | (Object.keys(stuffingItems).length > 0) ? false : true}\r\n          onClick={() => { getOrderDataFromBackend(ingredientsId) }}>\r\n          Оформить заказ\r\n        </Button>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BurgerConstructor;\r\n","import React from 'react';\r\nimport styles from './MainPage.module.css';\r\nimport BurgerIngredients from '../components/BurgerIngredients/BurgerIngredients';\r\nimport BurgerConstructor from '../components/BurgerConstructor/BurgerConstructor';\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\n\r\n\r\nexport function MainPage() {\r\n  return (\r\n    <DndProvider backend={HTML5Backend}>\r\n      <main className={styles.main}>\r\n        <BurgerIngredients />\r\n        <BurgerConstructor />\r\n      </main>\r\n    </DndProvider>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from \"react-redux\";\r\nimport commonStyles from './commonStyles.module.css';\r\nimport { Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link } from 'react-router-dom';\r\nimport { registerUser } from '../services/actions/auth';\r\n\r\n\r\n\r\nexport function RegistrationPage() {\r\n  const dispatch = useDispatch();\r\n\r\n  const [nameValue, setNameValue] = useState('');\r\n  const [emailValue, setEmailValue] = useState('');\r\n  const [passwordValue, setPasswordValue] = useState('');\r\n\r\n  const onFormSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    dispatch(registerUser(emailValue, passwordValue, nameValue));\r\n  }\r\n\r\n  return (\r\n    <main className={commonStyles.main}>\r\n\r\n      <div className={commonStyles.container}>\r\n        <h1 className=\"text text_type_main-medium\">Регистрация</h1>\r\n\r\n        <form className={commonStyles.form} onSubmit={onFormSubmit}>\r\n          <Input\r\n            value={nameValue}\r\n            type={'text'}\r\n            placeholder={'Имя'}\r\n            onChange={e => setNameValue(e.target.value)}\r\n            extraClass='mt-6'\r\n          />\r\n          <Input\r\n            value={emailValue}\r\n            type={'email'}\r\n            placeholder={'E-mail'}\r\n            onChange={e => setEmailValue(e.target.value)}\r\n            extraClass='mt-6 mb-6'\r\n          />\r\n          <PasswordInput value={passwordValue} onChange={e => setPasswordValue(e.target.value)} />\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"medium\"\r\n            extraClass='mt-6 mb-20'\r\n            disabled={!nameValue || !emailValue || !passwordValue} >\r\n            Зарегистрироваться\r\n          </Button>\r\n        </form>\r\n\r\n        <div className={`${commonStyles.navigationBlock} mb-4`}>\r\n          <p className='text text_type_main-default text_color_inactive'>\r\n            Уже зарегистрированы? <Link to=\"/login\" className={commonStyles.navigationLink}>Войти</Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n    </main>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport commonStyles from './commonStyles.module.css';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link, Redirect, useLocation } from 'react-router-dom';\r\nimport { forgotPassword } from '../services/actions/auth';\r\n\r\n\r\nexport function ForgotPasswordPage() {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  const { isPasswordRecoveryEmailReceived } = useSelector(store => store.auth);\r\n\r\n  const [emailValue, setEmailValue] = useState('');\r\n\r\n  const onFormSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    dispatch(forgotPassword(emailValue));\r\n  }\r\n\r\n   if (isPasswordRecoveryEmailReceived) {\r\n     return (<Redirect to={{ pathname: '/reset-password', state: {from: location} }} />);\r\n   }\r\n\r\n  return (\r\n    <main className={commonStyles.main}>\r\n\r\n      <div className={commonStyles.container}>\r\n        <h1 className=\"text text_type_main-medium\">Восстановление пароля</h1>\r\n\r\n        <form className={commonStyles.form} onSubmit={onFormSubmit}>\r\n          <Input\r\n            value={emailValue}\r\n            type={'email'}\r\n            placeholder={'Укажите e-mail'}\r\n            onChange={e => setEmailValue(e.target.value)}\r\n            extraClass='mt-6'\r\n          />\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"medium\"\r\n            extraClass='mt-6 mb-20'\r\n            disabled={!emailValue} >\r\n            Восстановить\r\n          </Button>\r\n        </form>\r\n\r\n        <div className={`${commonStyles.navigationBlock} mb-4`}>\r\n          <p className='text text_type_main-default text_color_inactive'>\r\n            Вспомнили пароль? <Link to=\"/login\" className={commonStyles.navigationLink}>Войти</Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n    </main>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport commonStyles from './commonStyles.module.css';\r\nimport { Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link, Redirect, useLocation } from 'react-router-dom';\r\nimport { resetPassword } from '../services/actions/auth';\r\n\r\n\r\nexport function ResetPasswordPage() {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  const { isResetPasswordSuccess } = useSelector(store => store.auth);\r\n\r\n  const [passwordValue, setPasswordValue] = useState('');\r\n  const [resetCodeValue, setResetCodeValue] = useState('');\r\n\r\n  const onFormSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    dispatch(resetPassword(passwordValue, resetCodeValue));\r\n  }\r\n\r\n  if (location.state?.from?.pathname !== '/forgot-password') {\r\n    return <Redirect to='/forgot-password' />;\r\n  };\r\n\r\n  if (isResetPasswordSuccess) {\r\n    return (<Redirect to={'/login'} />);\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <main className={commonStyles.main}>\r\n\r\n      <div className={commonStyles.container}>\r\n        <h1 className=\"text text_type_main-medium\">Восстановление пароля</h1>\r\n\r\n        <form className={commonStyles.form} onSubmit={onFormSubmit}>\r\n          <PasswordInput\r\n            value={passwordValue}\r\n            onChange={e => setPasswordValue(e.target.value)}\r\n            placeholder={'Введите новый пароль'}\r\n            extraClass='mt-6'\r\n          />\r\n          <Input\r\n            value={resetCodeValue}\r\n            type={'text'}\r\n            placeholder={'Введите код из письма'}\r\n            onChange={e => setResetCodeValue(e.target.value)}\r\n            extraClass='mt-6'\r\n          />\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"medium\"\r\n            extraClass='mt-6 mb-20'\r\n            disabled={!passwordValue || !resetCodeValue} >\r\n            Сохранить\r\n          </Button>\r\n        </form>\r\n\r\n        <div className={`${commonStyles.navigationBlock} mb-4`}>\r\n          <p className='text text_type_main-default text_color_inactive'>\r\n            Вспомнили пароль? <Link to=\"/login\" className={commonStyles.navigationLink}>Войти</Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n    </main>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport styles from './Navigation.module.css';\r\nimport commonStyles from '../../pages/commonStyles.module.css';\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\nimport { logoutUser } from '../../services/actions/auth';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n\r\n\r\nexport function Navigation() {\r\n    const dispatch = useDispatch();\r\n    const location = useLocation();\r\n\r\n    const switchNavigationFooterText = (location) => {\r\n        switch (location.pathname) {\r\n            case '/profile':\r\n                return <>В этом разделе вы можете изменить&nbsp;свои персональные данные</>;\r\n            case '/profile/orders':\r\n                return <>В этом разделе вы можете просмотреть&nbsp;свою историю заказов</>;\r\n            default:\r\n                return '';\r\n        };\r\n    };\r\n\r\n    const onExitLinkClick = (e) => {\r\n        e.preventDefault();\r\n\r\n        dispatch(logoutUser());\r\n    };\r\n\r\n\r\n    return (\r\n        <div className={styles.navContainer}>\r\n            <nav>\r\n                <ul className={styles.list}>\r\n                    <li className={styles.listItem}>\r\n                        <NavLink\r\n                            to='/profile'\r\n                            exact={true}\r\n                            className={`${styles.navigationLink} text text_type_main-medium text_color_inactive`}\r\n                            activeClassName={commonStyles.navigationLinkActive}>\r\n                            Профиль\r\n                        </NavLink>\r\n                    </li>\r\n                    <li className={styles.listItem}>\r\n                        <NavLink\r\n                            to='/profile/orders'\r\n                            exact={true}\r\n                            className={`${styles.navigationLink} text text_type_main-medium text_color_inactive`}\r\n                            activeClassName={commonStyles.navigationLinkActive}>\r\n                            История заказов\r\n                        </NavLink>\r\n                    </li>\r\n                    <li className={styles.listItem}>\r\n                        <NavLink\r\n                            to='/login'\r\n                            exact={true}\r\n                            onClick={onExitLinkClick}\r\n                            className={`${styles.navigationLink} text text_type_main-medium text_color_inactive`}\r\n                            activeClassName={commonStyles.navigationLinkActive}>\r\n                            Выход\r\n                        </NavLink>\r\n                    </li>\r\n                </ul>\r\n            </nav>\r\n\r\n            <p className='text text_type_main-default text_color_inactive mt-20'>\r\n                {switchNavigationFooterText(location)}\r\n            </p>\r\n        </div>\r\n    );\r\n};","import React, { useEffect, useState } from 'react';\r\nimport styles from './ProfileForm.module.css';\r\nimport { Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { refreshUserData } from '../../services/actions/auth';\r\n\r\n\r\n\r\nexport function ProfileForm() {\r\n    const dispatch = useDispatch();\r\n    const { name, email } = useSelector(store => store.auth.user);\r\n\r\n    const [nameValue, setNameValue] = useState('');\r\n    const [loginValue, setLoginValue] = useState(''); //Логин на форме соответствует e-mail пользователя.\r\n    const [passwordValue, setPasswordValue] = useState('');\r\n\r\n    const onFormSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        dispatch(refreshUserData(loginValue, nameValue, passwordValue));\r\n    };\r\n\r\n    const onFormReset = (e) => {\r\n        e.preventDefault();\r\n\r\n        setNameValue(name);\r\n        setLoginValue(email);\r\n        setPasswordValue('');\r\n    };\r\n\r\n    useEffect(() => {\r\n        setNameValue(name);\r\n        setLoginValue(email);\r\n      },\r\n        [name, email]);\r\n\r\n\r\n    return (\r\n        <form onSubmit={onFormSubmit} onReset={onFormReset}>\r\n            <Input\r\n                value={nameValue}\r\n                type={'text'}\r\n                icon={'EditIcon'}\r\n                placeholder={'Имя'}\r\n                onChange={e => setNameValue(e.target.value)}\r\n                extraClass='mb-6'\r\n            />\r\n            <Input\r\n                value={loginValue}\r\n                type={'text'}\r\n                icon={'EditIcon'}\r\n                placeholder={'Логин'}\r\n                onChange={e => setLoginValue(e.target.value)}\r\n                extraClass='mb-6'\r\n            />\r\n            <PasswordInput\r\n                value={passwordValue}\r\n                icon={'EditIcon'}\r\n                onChange={e => setPasswordValue(e.target.value)} />\r\n\r\n            <div className={`${styles.buttonGroup} mt-6`}>\r\n                <Button htmlType=\"reset\" type=\"primary\" size=\"medium\">Отмена</Button>\r\n                <Button htmlType=\"submit\" type=\"primary\" size=\"medium\">Сохранить</Button>\r\n            </div>\r\n        </form>\r\n    );\r\n};","import React from 'react';\r\nimport styles from './ProfilePage.module.css';\r\nimport commonStyles from './commonStyles.module.css';\r\nimport { Navigation } from '../components/Navigation/Navigation';\r\nimport { ProfileForm } from '../components/ProfileForm/ProfileForm';\r\n\r\n\r\nexport function ProfilePage() {\r\n  return (\r\n    <main className={commonStyles.main}>\r\n      <div className={styles.container}>\r\n        <Navigation />\r\n\r\n        <div className={styles.profileContainer}>\r\n          <ProfileForm />\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport styles from './NotFoundPage.module.css';\r\nimport commonStyles from './commonStyles.module.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport function NotFoundPage() {\r\n\r\n  return (\r\n    <main className={commonStyles.main}>\r\n      <div className={styles.container}>\r\n        <h1 className={`${styles.h1} text text_type_main-large`}>Error</h1>\r\n        <p className={`${styles.p1} text text_type_digits-large`}>404</p>\r\n        <p className={`${styles.p2} text text_type_main-large`}>Page not found!</p>\r\n\r\n        <div className={styles.navigationBlock}>\r\n          <p className='text text_type_main-default text_color_inactive'>\r\n            <Link to=\"/\" className={commonStyles.navigationLink}>Вернуться</Link> на главную страницу\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport styles from './IngredientIcon.module.css';\r\n\r\n\r\n\r\nexport function IngredientIcon({ ingredient, numberToRender = 0 }) {\r\n  return (\r\n    <div className={styles.iconContainer}>\r\n      <img src={ingredient.image} alt={ingredient.name} className={styles.image} />\r\n      {numberToRender ? (<div className={styles.overlay}>\r\n        <p className='text text_type_main-default'>{`+${numberToRender}`}</p>\r\n      </div>) : null}\r\n    </div>\r\n  );\r\n}\r\n","import { TOTAL_PRICE_INITIAL_STATE, ACTION_TYPE_SUM, ACTION_TYPE_RESET, INGREDIENT_TYPE_BUN } from './constants';\r\nimport { useSelector } from 'react-redux';\r\n\r\nfunction totalPriceReducer(state, action) {\r\n  if (!action.payload.length)\r\n    return TOTAL_PRICE_INITIAL_STATE;\r\n\r\n  switch (action.type) {\r\n    case ACTION_TYPE_SUM:\r\n      return {\r\n        totalPrice: action.payload.reduce((sum, curr) => {\r\n          return sum + (curr ? (curr.type === INGREDIENT_TYPE_BUN ? curr.price * 2 : curr.price) : 0);\r\n        }, 0)\r\n      };\r\n    case ACTION_TYPE_RESET:\r\n      return TOTAL_PRICE_INITIAL_STATE;\r\n    default:\r\n      throw new Error(`Wrong type of action: ${action.type}`);\r\n  }\r\n};\r\n\r\nconst getOrderIngredients = (ingredientsArr, allIngredientsArr) => {\r\n  return ingredientsArr?.map(id => {\r\n    return allIngredientsArr.find((item) => {\r\n      return item._id === id\r\n    });\r\n  });\r\n};\r\n\r\nconst getOrderPrice = (ingredientsArr) => {\r\n  return ingredientsArr?.reduce((sum, item) => {\r\n    return sum += item.price;\r\n  }, 0);\r\n};\r\n\r\nexport { totalPriceReducer, getOrderIngredients, getOrderPrice };","import commonStyles from '../pages/commonStyles.module.css';\r\n\r\nexport const renderOrderStatus = (status, styles) => {\r\n    switch (status) {\r\n        case 'done':\r\n            return <p className={`${styles} ${commonStyles.statusDone}`}>{'Выполнен'}</p>;\r\n        case 'pending':\r\n            return <p className={styles}>{'Готовится'}</p>;\r\n        case 'created':\r\n            return <p className={styles}>{'Создан'}</p>;\r\n        case 'cancelled':\r\n            return <p className={`${styles} ${commonStyles.statusCancelled}`}>{'Отменен'}</p>;\r\n        default:\r\n            return <p className={styles}>{status}</p>\r\n    }\r\n}","import React, { useCallback, useMemo } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport styles from './Order.module.css';\r\nimport { CurrencyIcon, FormattedDate } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { IngredientIcon } from '../IngredientIcon/IngredientIcon';\r\nimport { INGREDIENT_ICON_VIEWED_IN_ORDER_CARD_MAX } from '../../utils/constants';\r\nimport { SET_MODAL } from '../../services/actions/modal';\r\nimport { getOrderIngredients, getOrderPrice } from '../../utils/utils';\r\nimport { renderOrderStatus } from '../../utils/interface';\r\n\r\n\r\nexport function Order({ data, renderStatus = false }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const { number, createdAt, name, status, ingredients } = data;\r\n  const { allIngredients } = useSelector(store => store.allIngredients);\r\n\r\n  const orderIngredients = useMemo(() => {\r\n    return getOrderIngredients(ingredients, allIngredients);\r\n  }, [ingredients, allIngredients]);\r\n\r\n  const orderPrice = useMemo(() => {\r\n    return getOrderPrice(orderIngredients);\r\n  }, [orderIngredients]);\r\n\r\n\r\n  const outputIngredientIcons = (array) => {\r\n    return array.map((item, index) => {\r\n      if (index < INGREDIENT_ICON_VIEWED_IN_ORDER_CARD_MAX) {\r\n        return <li className={styles.listItem} key={index} style={{ left: index * 48, zIndex: array.length - index }}>\r\n          <IngredientIcon ingredient={item} />\r\n        </li>\r\n      } else if (index === INGREDIENT_ICON_VIEWED_IN_ORDER_CARD_MAX) {\r\n        return <li className={styles.listItem} key={index} style={{ left: index * 48, zIndex: array.length - index }}>\r\n          <IngredientIcon ingredient={item} numberToRender={array.length - index} />\r\n        </li>\r\n      } else return null;\r\n    });\r\n  };\r\n\r\n  const onOrderClick = useCallback(() => {\r\n    dispatch({ type: SET_MODAL, payload: { content: 'orderDetails' } });\r\n  }, [dispatch]);\r\n\r\n\r\n\r\n  return (\r\n    <li className='mr-2' onClick={onOrderClick}>\r\n      <div className={`${styles.container} p-6 mb-4`}>\r\n\r\n        <div className={`${styles.groupIdDate} mb-6`}>\r\n          <p className=\"text text_type_digits-default\">{`#${number}`}</p>\r\n          <div className='text text_type_main-default text_color_inactive'>\r\n            <p className={styles.dateTimezoneOffset}>\r\n              <FormattedDate date={new Date(createdAt)} />\r\n              {` i-GMT+${-new Date(createdAt).getTimezoneOffset() / 60}`}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <p className='text text_type_main-medium'>{name}</p>\r\n\r\n        {renderStatus && renderOrderStatus(status, 'text text_type_main-default mt-2')}\r\n\r\n        <div className={`${styles.groupImagesPrice} mt-6`}>\r\n          <ul className={styles.list}>\r\n            {outputIngredientIcons(orderIngredients)}\r\n          </ul>\r\n\r\n          <div className={`${styles.groupPrice} pl-6`}>\r\n            <p className=\"text text_type_digits-default pr-2\">{orderPrice.toLocaleString()}</p>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </li>\r\n  );\r\n}","import React from 'react';\r\nimport styles from './OrdersList.module.css';\r\nimport { Order } from '../Order/Order';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link, useLocation, useRouteMatch } from 'react-router-dom';\r\n\r\n\r\n\r\nexport function OrdersList({ renderStatus = false }) {\r\n  const location = useLocation();\r\n  const { orders } = useSelector(store => store.ws);\r\n  const match = useRouteMatch();\r\n\r\n  return (\r\n    <ul className={styles.list}>\r\n      {orders && orders.map(item => {\r\n        return (\r\n          <Link to={{ pathname: `${match.path}/${item._id}`, state: { background: location } }} className={styles.link} key={item._id}>\r\n            <Order data={item} renderStatus={renderStatus} />\r\n          </Link>);\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n","export const WS_CONNECTION_OPEN = 'WS_CONNECTION_OPEN';\r\nexport const WS_CONNECTION_SUCCESS = 'WS_CONNECTION_SUCCESS';\r\nexport const WS_CONNECTION_ERROR = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSE = 'WS_CONNECTION_CLOSE';\r\nexport const WS_CONNECTION_DISCONNECT = 'WS_CONNECTION_DISCONNECT';\r\nexport const WS_GET_MESSAGE = 'WS_GET_MESSAGE';\r\nexport const WS_SEND_MESSAGE = 'WS_SEND_MESSAGE';\r\n\r\n\r\nexport const wsInitConnection = () => (dispatch) => {\r\n    dispatch({\r\n        type: WS_CONNECTION_OPEN,\r\n        payload: '/all'\r\n    });\r\n};\r\n\r\nexport const wsInitAuthConnection = (accessToken) => (dispatch) => {\r\n    dispatch({\r\n        type: WS_CONNECTION_OPEN,\r\n        payload: `?token=${accessToken}`\r\n    });\r\n};\r\n\r\nexport const wsCloseConnection = () => (dispatch) => {\r\n    dispatch({\r\n        type: WS_CONNECTION_CLOSE\r\n    });\r\n};","import React, { useEffect } from 'react';\r\nimport commonStyles from './commonStyles.module.css';\r\nimport styles from './OrdersPage.module.css';\r\nimport { Navigation } from '../components/Navigation/Navigation';\r\nimport { OrdersList } from '../components/OrdersList/OrdersList';\r\nimport { wsInitAuthConnection, wsCloseConnection } from '../services/actions/webSocket';\r\nimport { getCookie } from '../utils/cookie';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Loader from '../components/Loader/Loader';\r\n\r\n\r\nexport function OrdersPage() {\r\n  const dispatch = useDispatch();\r\n  const token = getCookie('token');\r\n  const { wsConnected } = useSelector(store => store.ws);\r\n\r\n  useEffect(() => {\r\n    dispatch(wsInitAuthConnection(token));\r\n\r\n    return () => {\r\n      dispatch(wsCloseConnection());\r\n    }\r\n  }, [dispatch]);\r\n\r\n\r\n  return (\r\n    <main className={commonStyles.main}>\r\n      <div className={styles.container}>\r\n        <Navigation />\r\n\r\n        <div className={styles.ordersListContainer}>\r\n          {!wsConnected ? (\r\n            <Loader size={'superLarge'} />\r\n          ) : (\r\n            <OrdersList renderStatus={true} />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport styles from './OrderStats.module.css';\r\nimport { useSelector } from 'react-redux';\r\n\r\n\r\nexport function OrderStats() {\r\n  const { orders, total, totalToday } = useSelector(store => store.ws);\r\n\r\n  const ordersStatusDone = orders?.filter(item => item.status === 'done').slice(0, 30);\r\n  const ordersStatusPending = orders?.filter(item => item.status === 'pending').slice(0, 30);\r\n\r\n  const displayOrderNumber = (ordersArray, isDone = false) => {\r\n    return ordersArray.map(item => {\r\n      return (\r\n        <li key={item._id} className={`${styles.listItem} mb-2`}>\r\n          <p className={`${isDone ? styles.orderDone : ''} text text_type_digits-default`}>{item.number}</p>\r\n        </li>);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={`${styles.container} pt-15 ml-15`}>\r\n\r\n      <div className={`${styles.ordersBoard} mb-15`}>\r\n        <div className={styles.groupList}>\r\n          <h2 className='text text_type_main-medium mb-6'>Готовы:</h2>\r\n\r\n          <ul className={styles.list}>\r\n            {displayOrderNumber(ordersStatusDone, true)}\r\n          </ul>\r\n        </div>\r\n\r\n        <div className={`${styles.groupList} pl-6`}>\r\n          <h2 className='text text_type_main-medium mb-6'>В работе:</h2>\r\n\r\n          <ul className={styles.list}>\r\n            {displayOrderNumber(ordersStatusPending)}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.groupTotal}>\r\n        <h2 className='text text_type_main-medium'>Выполнено за все время:</h2>\r\n        <p className={`${styles.glowText} text text_type_digits-large mb-15`}>{total.toLocaleString()}</p>\r\n      </div>\r\n\r\n      <div className={styles.groupTotal}>\r\n        <h2 className='text text_type_main-medium'>Выполнено за сегодня:</h2>\r\n        <p className={`${styles.glowText} text text_type_digits-large`}>{totalToday}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport commonStyles from './commonStyles.module.css';\r\nimport styles from './FeedPage.module.css';\r\nimport { OrdersList } from '../components/OrdersList/OrdersList';\r\nimport { OrderStats } from '../components/OrderStats/OrderStats';\r\nimport Loader from '../components/Loader/Loader';\r\nimport { wsInitConnection, wsCloseConnection } from '../services/actions/webSocket';\r\n\r\n\r\n\r\nexport function FeedPage() {\r\n  const dispatch = useDispatch();\r\n  const { wsConnected } = useSelector(store => store.ws);\r\n\r\n  useEffect(() => {\r\n    dispatch(wsInitConnection());\r\n\r\n    return () => {\r\n      dispatch(wsCloseConnection());\r\n    }\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <main className={commonStyles.main}>\r\n\r\n      <div className={styles.container}>\r\n        {!wsConnected ? (\r\n          <Loader size={'superLarge'} />\r\n        ) : (\r\n          <>\r\n            <div className={`${styles.ordersListContainer} pl-5`}>\r\n              <h1 className='text text_type_main-large mb-5'>Лента заказов</h1>\r\n\r\n              <OrdersList />\r\n            </div>\r\n\r\n            <OrderStats />\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n    </main>\r\n  );\r\n}\r\n","import { getAllIngredientsRequest } from '../../utils/api';\r\n\r\nexport const GET_ALL_INGREDIENTS_REQUEST = 'GET_ALL_INGREDIENTS_REQUEST';\r\nexport const GET_ALL_INGREDIENTS_SUCCESS = 'GET_ALL_INGREDIENTS_SUCCESS';\r\nexport const GET_ALL_INGREDIENTS_FAILED = 'GET_ALL_INGREDIENTS_FAILED';\r\n\r\n\r\nexport function getAllIngredients() {\r\n  return function (dispatch) {\r\n    dispatch({ type: GET_ALL_INGREDIENTS_REQUEST });\r\n\r\n    getAllIngredientsRequest().then(res => {\r\n      if (res && res.success) {\r\n        dispatch({\r\n          type: GET_ALL_INGREDIENTS_SUCCESS,\r\n          items: res.data\r\n        });\r\n      } else {\r\n        dispatch({ type: GET_ALL_INGREDIENTS_FAILED });\r\n      }\r\n    });\r\n  };\r\n}\r\n","import styles from './OrderInfo.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\n\r\nfunction OrderInfo({ orderId, orderStatus, orderInfoMessage }) {\r\n  return (\r\n    <div className={styles.content}>\r\n      <h3 className={`${styles.header} text text_type_digits-large mt-4`}>{orderId}</h3>\r\n      <p className='text text_type_main-medium mt-8'>идентификатор заказа</p>\r\n      <div className={`${styles.image} mt-15`} ></div>\r\n      <p className='text text_type_main-default mt-15'>{orderStatus}</p>\r\n      <p className='text text_type_main-default text_color_inactive mt-2 mb-30'>{orderInfoMessage}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nOrderInfo.propTypes = {\r\n  orderId: PropTypes.string.isRequired,\r\n  orderStatus: PropTypes.string.isRequired,\r\n  orderInfoMessage: PropTypes.string\r\n};\r\n\r\n\r\n\r\nexport default OrderInfo;\r\n","import React, { useMemo } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport styles from './OrderDetails.module.css';\r\nimport { CurrencyIcon, FormattedDate } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { IngredientIcon } from '../IngredientIcon/IngredientIcon';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getOrderIngredients, getOrderPrice } from '../../utils/utils';\r\nimport { renderOrderStatus } from '../../utils/interface';\r\n\r\n\r\nexport function OrderDetails() {\r\n  const { id } = useParams();\r\n\r\n  const orders = useSelector(store => store.ws.orders);\r\n  const order = orders?.find(item => item._id === id);\r\n  \r\n  /* const { number, name, status, ingredients, createdAt } = order; */\r\n\r\n  const { allIngredients } = useSelector(store => store.allIngredients);\r\n\r\n  const orderIngredients = useMemo(() => {\r\n    return getOrderIngredients(order?.ingredients, allIngredients);\r\n  }, [order?.ingredients, allIngredients]);\r\n\r\n  const orderPrice = useMemo(() => {\r\n    return getOrderPrice(orderIngredients);\r\n  }, [orderIngredients]);\r\n\r\n  //Получим массив уникальных значений ингредиентов.\r\n  const uniqueIngredients = Array.from(new Set(orderIngredients));\r\n\r\n  //Определим функцию для подсчета количества ингредиентов в заказе.\r\n  const getIngredientCount = (ingredient) => {\r\n    return orderIngredients.filter(item => {\r\n      return item === ingredient;\r\n    }).length;\r\n  };\r\n\r\n  if (!order) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`${styles.content} pt-10 pb-10`}>\r\n\r\n      <div className={styles.idContainer}>\r\n        <p className=\"text text_type_digits-default\">{`#${order.number}`}</p>\r\n      </div>\r\n\r\n      <h1 className=\"text text_type_main-medium mt-10 mb-3\">{order.name}</h1>\r\n\r\n      {renderOrderStatus(order.status, `text text_type_main-default ${styles.addBox}`)}\r\n\r\n      <p className=\"text text_type_main-medium mt-15 mb-6\">{'Состав:'}</p>\r\n      <ul className={styles.ingredientsList}>\r\n        {uniqueIngredients.map((item, index) => <li className={`${styles.listItem} pb-4 pr-6`} key={index}>\r\n          <div className={styles.groupIngredientIcoName}>\r\n            <IngredientIcon ingredient={item} />\r\n            <p className=\"text text_type_main-default pl-4 pr-4\">{item.name}</p>\r\n          </div>\r\n\r\n          <div className={styles.container}>\r\n            <p className={`${styles.price} text text_type_digits-default`}>{`${getIngredientCount(item)} x ${item.price.toLocaleString()}`}</p>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n        </li>)}\r\n      </ul>\r\n\r\n      <div className={`${styles.footerContainer}  pt-10`}>\r\n        <p className={`${styles.dateTimezoneOffset} text text_type_main-default text_color_inactive`}>\r\n          <FormattedDate date={new Date(order.createdAt)} />\r\n          {` i-GMT+${-new Date(order.createdAt).getTimezoneOffset() / 60}`}\r\n        </p>\r\n\r\n        <div className={styles.container}>\r\n          <p className={`${styles.price} text text_type_digits-default`}>{orderPrice.toLocaleString()}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useLocation } from 'react-router-dom';\r\nimport Loader from '../components/Loader/Loader';\r\nimport { OrderDetails } from '../components/OrderDetails/OrderDetails';\r\nimport { wsCloseConnection, wsInitAuthConnection, wsInitConnection } from '../services/actions/webSocket';\r\nimport { getCookie } from '../utils/cookie';\r\nimport commonStyles from './commonStyles.module.css';\r\n\r\n\r\nexport function OrderDetailsPage() {\r\n    const dispatch = useDispatch();\r\n    const location = useLocation();\r\n    const token = getCookie('token');\r\n    const { wsConnected } = useSelector(store => store.ws);\r\n\r\n    useEffect(() => {\r\n        if (location.pathname.includes('/feed')) {\r\n            dispatch(wsInitConnection());\r\n        };\r\n        if (location.pathname.includes('/profile/orders')) {\r\n            dispatch(wsInitAuthConnection(token));\r\n        };\r\n\r\n        return () => {\r\n            dispatch(wsCloseConnection());\r\n        }\r\n    }, [dispatch]);\r\n\r\n\r\n    return (\r\n        <main className={commonStyles.main}>\r\n            {!wsConnected ? (\r\n                <Loader size={'superLarge'} />\r\n            ) : (\r\n                <OrderDetails />\r\n            )}\r\n        </main>\r\n    );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport appStyles from './App.module.css';\r\nimport AppHeader from '../AppHeader/AppHeader';\r\nimport Modal from '../Modal/Modal';\r\nimport IngredientDetails from '../IngredientDetails/IngredientDetails';\r\nimport { Route, Switch, useHistory, useLocation } from \"react-router-dom\";\r\nimport { ProtectedRoute } from \"../ProtectedRoute/ProtectedRoute\";\r\nimport {\r\n  LoginPage,\r\n  MainPage,\r\n  RegistrationPage,\r\n  ForgotPasswordPage,\r\n  ResetPasswordPage,\r\n  ProfilePage,\r\n  NotFoundPage,\r\n  OrdersPage,\r\n  FeedPage\r\n} from '../../pages/index';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getUserData } from '../../services/actions/auth';\r\nimport { getAllIngredients } from '../../services/actions/allIngredients';\r\nimport { RESET_MODAL } from '../../services/actions/modal';\r\nimport OrderInfo from '../OrderInfo/OrderInfo';\r\nimport { OrderDetails } from '../OrderDetails/OrderDetails';\r\nimport Loader from '../Loader/Loader';\r\nimport { CONSTRUCTOR_CLEANUP } from '../../services/actions/constructorIngredients';\r\nimport { OrderDetailsPage } from '../../pages/OrderDetailsPage';\r\n\r\n\r\n\r\nexport default function App() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const background = location.state?.background;\r\n\r\n  const { isOpened, content } = useSelector(store => store.modal);\r\n  const { orderData, orderDataRequest } = useSelector(store => store.orderData);\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserData());\r\n  },\r\n    [dispatch]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getAllIngredients())\r\n  }, [dispatch]);\r\n\r\n  const onIngredientModalClose = (background) => {\r\n    dispatch({ type: RESET_MODAL });\r\n    history.replace({ pathname: background.pathname });\r\n  };\r\n\r\n  const onOrderInfoModalClose = () => {\r\n    dispatch({ type: RESET_MODAL });\r\n    if (orderData.success) dispatch({ type: CONSTRUCTOR_CLEANUP });\r\n  };\r\n\r\n  const onOrderDetailsModalClose = () => {\r\n    dispatch({ type: RESET_MODAL });\r\n    history.replace({ pathname: background.pathname });\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <div className={appStyles.page}>\r\n      <AppHeader />\r\n\r\n      <Switch location={background || location}>\r\n        <Route path='/' exact={true}>\r\n          <MainPage />\r\n        </Route>\r\n        <ProtectedRoute path='/login' exact={true} onlyUnAuth={true}>\r\n          <LoginPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path='/register' exact={true} onlyUnAuth={true}>\r\n          <RegistrationPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path='/forgot-password' exact={true} onlyUnAuth={true}>\r\n          <ForgotPasswordPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path='/reset-password' exact={true} onlyUnAuth={true}>\r\n          <ResetPasswordPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path='/profile' exact={true}>\r\n          <ProfilePage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path='/profile/orders' exact={true}>\r\n          <OrdersPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path='/profile/orders/:id' exact={true}>\r\n          <OrderDetailsPage />\r\n        </ProtectedRoute>\r\n        <Route path='/ingredients/:id' exact={true}>\r\n          <IngredientDetails />\r\n        </Route>\r\n        <Route path='/feed' exact={true}>\r\n          <FeedPage />\r\n        </Route>\r\n        <Route path='/feed/:id' exact={true}>\r\n          <OrderDetailsPage />\r\n        </Route>\r\n        <Route>\r\n          <NotFoundPage />\r\n        </Route>\r\n      </Switch>\r\n\r\n      {background && (content === 'ingredient') &&\r\n        (<Route path='/ingredients/:id' exact={true}>\r\n          <Modal title='Детали ингредиента' onClose={() => onIngredientModalClose(background)} >\r\n            <IngredientDetails />\r\n          </Modal>\r\n        </Route>)\r\n      }\r\n      {background &&\r\n        (<ProtectedRoute path='/profile/orders/:id' exact={true}>\r\n          <Modal onClose={() => onOrderDetailsModalClose(background)} >\r\n            <OrderDetails />\r\n          </Modal>\r\n        </ProtectedRoute>)\r\n      }\r\n      {background &&\r\n        (<Route path='/feed/:id' exact={true}>\r\n          <Modal onClose={() => onOrderDetailsModalClose(background)} >\r\n            <OrderDetails />\r\n          </Modal>\r\n        </Route>)\r\n      }\r\n      {isOpened && (content === 'orderInfo') &&\r\n        < Modal onClose={() => onOrderInfoModalClose()} >\r\n          {orderDataRequest ? (<Loader size='superLarge' />) :\r\n            orderData.success ? (\r\n              <OrderInfo\r\n                orderId={orderData.order.number.toString()}\r\n                orderStatus='Ваш заказ начали готовить'\r\n                orderInfoMessage='Дождитесь готовности на орбитальной станции'\r\n              />) : (\r\n              <OrderInfo\r\n                orderId=''\r\n                orderStatus='В процессе оформления заказа возникла ошибка'\r\n                orderInfoMessage='Попробуйте оформить заказ позже'\r\n              />\r\n            )}\r\n        </Modal>}\r\n    </div >\r\n  );\r\n}\r\n","import { getCookie } from \"../../utils/cookie\";\r\nimport { getUserData } from \"../actions/auth\";\r\nimport { wsInitAuthConnection } from \"../actions/webSocket\";\r\n\r\nexport const socketMiddleware = (wsUrl, wsActions) => {\r\n  return store => {\r\n    let socket = null;\r\n    let isConnected = false;\r\n    let reconnectTimer = 0;\r\n\r\n    return next => action => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n      const { wsInit, wsOnOpen, wsOnError, wsOnClose, wsDisconnect, wsOnMessage, wsSendMessage } = wsActions;\r\n\r\n      if (type === wsInit) {\r\n        console.log('WS connection open initiated!');\r\n        socket = new WebSocket(`${wsUrl}${payload}`);\r\n        isConnected = true;\r\n      } else if (type === wsOnClose && socket) {\r\n        console.log('WS connection close initiated!');\r\n        isConnected = false;\r\n        clearTimeout(reconnectTimer);\r\n        reconnectTimer = 0;\r\n\r\n        socket.close(1000, 'WS is closed.');\r\n      }\r\n\r\n      if (socket) {\r\n        socket.onopen = event => {\r\n          dispatch({ type: wsOnOpen });\r\n        }\r\n        socket.onerror = event => {\r\n          console.log('WS onError.', event);\r\n        }\r\n        socket.onmessage = event => {\r\n          const { data } = event;\r\n          const parsedData = JSON.parse(data);\r\n          const { success, ...restParsedData } = parsedData;\r\n\r\n          dispatch({ type: wsOnMessage, payload: restParsedData });\r\n        }\r\n        socket.onclose = event => {\r\n          if (event.code !== 1000) {\r\n            console.log('WS onClose.', event);\r\n            dispatch({ type: wsOnError, payload: event.code.toString() });\r\n          };\r\n            \r\n          dispatch({ type: wsDisconnect }); \r\n\r\n          if (isConnected) {\r\n            dispatch(getUserData());\r\n\r\n            reconnectTimer = window.setTimeout(() => {\r\n              console.log('Try to reconnect WS...');\r\n              dispatch(wsInitAuthConnection(getCookie('token')));\r\n            }, 3000);\r\n          }\r\n        }\r\n        if (type === wsSendMessage) {\r\n          const orders = { ...payload };\r\n\r\n          socket.send(JSON.stringify(orders));\r\n        }\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};","import {\r\n  GET_ALL_INGREDIENTS_REQUEST,\r\n  GET_ALL_INGREDIENTS_SUCCESS,\r\n  GET_ALL_INGREDIENTS_FAILED\r\n} from '../actions/allIngredients';\r\n\r\n\r\nconst initialState = {\r\n  allIngredients: [],\r\n  allIngredientsRequest: false,\r\n  allIngredientsFailed: false\r\n};\r\n\r\n\r\n\r\nexport const allIngredientsReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case GET_ALL_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        allIngredientsRequest: true\r\n      }\r\n    }\r\n    case GET_ALL_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        allIngredientsRequest: false,\r\n        allIngredientsFailed: false,\r\n        allIngredients: action.items\r\n      }\r\n    }\r\n    case GET_ALL_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...state,\r\n        allIngredientsRequest: false,\r\n        allIngredientsFailed: true\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  };\r\n};\r\n","import {\r\n  ADD_BUN_TO_CONSTRUCTOR,\r\n  ADD_STUFFING_ELEMENT_TO_CONSTRUCTOR,\r\n  DELETE_STUFFING_ELEMENT_FROM_CONSTRUCTOR,\r\n  REORDER_STUFFING_ELEMENTS,\r\n  CONSTRUCTOR_CLEANUP\r\n} from '../actions/constructorIngredients';\r\n\r\n\r\nconst initialState = {\r\n  bun: {},\r\n  stuffing: []\r\n};\r\n\r\n\r\n\r\nexport const constructorIngredientsReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_BUN_TO_CONSTRUCTOR: {\r\n      return {\r\n        ...state,\r\n        bun: action.payload\r\n      }\r\n    }\r\n    case ADD_STUFFING_ELEMENT_TO_CONSTRUCTOR: {\r\n      return {\r\n        ...state,\r\n        stuffing: [...state.stuffing, action.payload]\r\n      }\r\n    }\r\n    case DELETE_STUFFING_ELEMENT_FROM_CONSTRUCTOR: {\r\n      return {\r\n        ...state,\r\n        stuffing: [...state.stuffing].filter(item => item.id !== action.id)\r\n      }\r\n    }\r\n    case REORDER_STUFFING_ELEMENTS: {\r\n      const reorderStuffing = [...state.stuffing];\r\n\r\n      reorderStuffing.splice(\r\n        action.dragIndex,\r\n        0,\r\n        reorderStuffing.splice(action.dropIndex, 1)[0]\r\n      );\r\n\r\n      return {\r\n        ...state,\r\n        stuffing: reorderStuffing\r\n      }\r\n    }\r\n    case CONSTRUCTOR_CLEANUP: {\r\n      return initialState;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  };\r\n};\r\n","import {\r\n  GET_ORDER_DATA_REQUEST,\r\n  GET_ORDER_DATA_SUCCESS,\r\n  GET_ORDER_DATA_FAILED\r\n} from '../actions/orderData';\r\n\r\nconst initialState = {\r\n  orderData: {\r\n    name: \"\",\r\n    order: {\r\n      number: null,\r\n    },\r\n    success: false\r\n  },\r\n  orderDataRequest: false\r\n};\r\n\r\n\r\n\r\nexport const orderDataReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case GET_ORDER_DATA_REQUEST: {\r\n      return {\r\n        ...state,\r\n        orderDataRequest: true\r\n      };\r\n    }\r\n    case GET_ORDER_DATA_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        orderDataRequest: false,\r\n        orderData: action.payload\r\n      };\r\n    }\r\n    case GET_ORDER_DATA_FAILED: {\r\n      return initialState;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  };\r\n};\r\n","import {\r\n  REGISTRATION_USER_REQUEST,\r\n  REGISTRATION_USER_SUCCESS,\r\n  REGISTRATION_USER_FAILED,\r\n  LOGIN_USER_REQUEST,\r\n  LOGIN_USER_SUCCESS,\r\n  LOGIN_USER_FAILED,\r\n  LOGOUT_USER_REQUEST,\r\n  LOGOUT_USER_SUCCESS,\r\n  LOGOUT_USER_FAILED,\r\n  FORGOT_PASSWORD_REQUEST,\r\n  FORGOT_PASSWORD_SUCCESS,\r\n  FORGOT_PASSWORD_FAILED,\r\n  RESET_PASSWORD_REQUEST,\r\n  RESET_PASSWORD_SUCCESS,\r\n  RESET_PASSWORD_FAILED,\r\n  GET_USERDATA_REQUEST,\r\n  GET_USERDATA_SUCCESS,\r\n  GET_USERDATA_FAILED,\r\n  REFRESH_USERDATA_REQUEST,\r\n  REFRESH_USERDATA_SUCCESS,\r\n  REFRESH_USERDATA_FAILED,\r\n  UPDATE_TOKEN_REQUEST,\r\n  UPDATE_TOKEN_SUCCESS,\r\n  UPDATE_TOKEN_FAILED\r\n} from '../actions/auth';\r\nimport { setCookie, deleteCookie } from '../../utils/cookie';\r\n\r\nconst initialState = {\r\n  user: null,\r\n  registrationRequest: false,\r\n  registrationFailed: false,\r\n  registrationFailedMessage: '',\r\n  loginRequest: false,\r\n  loginFailed: false,\r\n  loginFailedMessage: '',\r\n  logoutRequest: false,\r\n  logoutFailed: false,\r\n  logoutFailedMessage: '',\r\n  forgotPasswordRequest: false,\r\n  forgotPasswordFailed: false,\r\n  forgotPasswordMessage: '',\r\n  resetPasswordRequest: false,\r\n  resetPasswordFailed: false,\r\n  resetPasswordMessage: '',\r\n  getUserDataRequest: false,\r\n  getUserDataFailed: false,\r\n  getUserDataMessage: '',\r\n  refreshUserDataRequest: false,\r\n  refreshUserDataFailed: false,\r\n  refreshUserDataMessage: '',\r\n  updateTokenRequest: false,\r\n  updateTokenFailed: false,\r\n  updateTokenMessage: '',\r\n  isPasswordRecoveryEmailReceived: false,\r\n  isResetPasswordSuccess: false\r\n};\r\n\r\n\r\n\r\nexport const authReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case REGISTRATION_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        registrationRequest: true\r\n      }\r\n    }\r\n    case REGISTRATION_USER_SUCCESS: {\r\n      const { user, accessToken, refreshToken } = action.payload;\r\n\r\n      setCookie('token', accessToken.split('Bearer ')[1]);\r\n      localStorage.setItem('refreshToken', refreshToken);\r\n      console.log('Registration success!');\r\n\r\n      return {\r\n        ...state,\r\n        registrationRequest: false,\r\n        registrationFailed: false,\r\n        registrationFailedMessage: '',\r\n        user: user\r\n      }\r\n    }\r\n    case REGISTRATION_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        registrationRequest: false,\r\n        registrationFailed: true,\r\n        registrationFailedMessage: action.payload\r\n      }\r\n    }\r\n    case LOGIN_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        loginRequest: true\r\n      }\r\n    }\r\n    case LOGIN_USER_SUCCESS: {\r\n      const { user, accessToken, refreshToken } = action.payload;\r\n\r\n      setCookie('token', accessToken.split('Bearer ')[1]);\r\n      localStorage.setItem('refreshToken', refreshToken);\r\n      console.log('Login success!');\r\n\r\n      return {\r\n        ...state,\r\n        loginRequest: false,\r\n        loginFailed: false,\r\n        loginFailedMessage: '',\r\n        user: user\r\n      }\r\n    }\r\n    case LOGIN_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        loginRequest: false,\r\n        loginFailed: true,\r\n        loginFailedMessage: action.payload\r\n      }\r\n    }\r\n    case LOGOUT_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: true\r\n      }\r\n    }\r\n    case LOGOUT_USER_SUCCESS: {\r\n      deleteCookie('token');\r\n      localStorage.removeItem('refreshToken');\r\n      console.log('Logout success!');\r\n\r\n      return {\r\n        ...state,\r\n        logoutRequest: false,\r\n        logoutFailed: false,\r\n        logoutFailedMessage: '',\r\n        user: initialState.user\r\n      }\r\n    }\r\n    case LOGOUT_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: false,\r\n        logoutFailed: true,\r\n        logoutFailedMessage: action.payload\r\n      }\r\n    }\r\n    case FORGOT_PASSWORD_REQUEST: {\r\n      return {\r\n        ...state,\r\n        forgotPasswordRequest: true\r\n      }\r\n    }\r\n    case FORGOT_PASSWORD_SUCCESS: {\r\n      const { message } = action.payload;\r\n      console.log('Password recovery sucess : ', message);\r\n\r\n      return {\r\n        ...state,\r\n        forgotPasswordRequest: false,\r\n        forgotPasswordFailed: false,\r\n        forgotPasswordMessage: message,\r\n        isPasswordRecoveryEmailReceived: true\r\n      }\r\n    }\r\n    case FORGOT_PASSWORD_FAILED: {\r\n      return {\r\n        ...state,\r\n        forgotPasswordRequest: false,\r\n        forgotPasswordFailed: true,\r\n        forgotPasswordMessage: action.payload\r\n      }\r\n    }\r\n    case RESET_PASSWORD_REQUEST: {\r\n      return {\r\n        ...state,\r\n        resetPasswordRequest: true\r\n      }\r\n    }\r\n    case RESET_PASSWORD_SUCCESS: {\r\n      const { message } = action.payload;\r\n      console.log('Password reset sucess : ', message);\r\n\r\n      return {\r\n        ...state,\r\n        resetPasswordRequest: false,\r\n        resetPasswordFailed: false,\r\n        resetPasswordMessage: message,\r\n        isPasswordRecoveryEmailReceived: false,\r\n        isResetPasswordSuccess: true\r\n      }\r\n    }\r\n    case RESET_PASSWORD_FAILED: {\r\n      return {\r\n        ...state,\r\n        resetPasswordRequest: false,\r\n        resetPasswordFailed: true,\r\n        resetPasswordMessage: action.payload\r\n      }\r\n    }\r\n    case GET_USERDATA_REQUEST: {\r\n      return {\r\n        ...state,\r\n        getUserDataRequest: true\r\n      }\r\n    }\r\n    case GET_USERDATA_SUCCESS: {\r\n      const { user } = action.payload;\r\n      console.log('User data received successfully!');\r\n\r\n      return {\r\n        ...state,\r\n        getUserDataRequest: false,\r\n        getUserDataFailed: false,\r\n        getUserDataMessage: '',\r\n        user: user\r\n      }\r\n    }\r\n    case GET_USERDATA_FAILED: {\r\n      return {\r\n        ...state,\r\n        getUserDataRequest: false,\r\n        getUserDataFailed: true,\r\n        getUserDataMessage: action.payload\r\n      }\r\n    }\r\n    case REFRESH_USERDATA_REQUEST: {\r\n      return {\r\n        ...state,\r\n        refreshUserDataRequest: true\r\n      }\r\n    }\r\n    case REFRESH_USERDATA_SUCCESS: {\r\n      const { user } = action.payload;\r\n      console.log('User data refreshed successfully!');\r\n\r\n      return {\r\n        ...state,\r\n        refreshUserDataRequest: false,\r\n        refreshUserDataFailed: false,\r\n        refreshUserDataMessage: '',\r\n        user: user\r\n      }\r\n    }\r\n    case REFRESH_USERDATA_FAILED: {\r\n      return {\r\n        ...state,\r\n        refreshUserDataRequest: false,\r\n        refreshUserDataFailed: true,\r\n        refreshUserDataMessage: action.payload\r\n      }\r\n    }\r\n    case UPDATE_TOKEN_REQUEST: {\r\n      return {\r\n        ...state,\r\n        updateTokenRequest: true\r\n      }\r\n    }\r\n    case UPDATE_TOKEN_SUCCESS: {\r\n      const { accessToken, refreshToken } = action.payload;\r\n\r\n      setCookie('token', accessToken.split('Bearer ')[1]);\r\n      localStorage.setItem('refreshToken', refreshToken);\r\n      console.log('Access and refresh tokens update successfully!');\r\n\r\n      return {\r\n        ...state,\r\n        updateTokenRequest: false,\r\n        updateTokenFailed: false,\r\n        updateTokenMessage: ''\r\n      }\r\n    }\r\n    case UPDATE_TOKEN_FAILED: {\r\n      return {\r\n        ...state,\r\n        updateTokenRequest: false,\r\n        updateTokenFailed: true,\r\n        updateTokenMessage: action.payload\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  };\r\n};\r\n","import { SET_MODAL, RESET_MODAL } from '../actions/modal';\r\n\r\n\r\nconst initialState = {\r\n  isOpened: false,\r\n  content: ''\r\n};\r\n\r\n\r\n\r\nexport const modalReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_MODAL: {\r\n      return {\r\n        isOpened: true,\r\n        content: action.payload.content\r\n      }\r\n    }\r\n    case RESET_MODAL: {\r\n      return initialState;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  };\r\n};\r\n","import {\r\n    WS_CONNECTION_SUCCESS,\r\n    WS_CONNECTION_ERROR,\r\n    WS_CONNECTION_DISCONNECT,\r\n    WS_GET_MESSAGE\r\n} from '../actions/webSocket';\r\n\r\n\r\n\r\nconst initialState = {\r\n    wsConnected: false,\r\n    error: undefined,\r\n    orders: [],\r\n    total: 0,\r\n    totalToday: 0\r\n}\r\n\r\nexport const wsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case WS_CONNECTION_SUCCESS: {\r\n            console.log('WS connection open successfully!');\r\n\r\n            return {\r\n                ...state,\r\n                wsConnected: true\r\n            };\r\n        }\r\n        case WS_CONNECTION_ERROR: {\r\n            console.log('An WS connection error occured!');\r\n\r\n            return {\r\n                ...state,\r\n                wsConnected: false,\r\n                error: action.payload\r\n            };\r\n        }\r\n        case WS_CONNECTION_DISCONNECT: {\r\n            console.log('WS connection was closed!');\r\n\r\n            return initialState;\r\n        }\r\n        case WS_GET_MESSAGE: {\r\n            console.log('A message was received over WS!');\r\n\r\n            const { orders, total, totalToday } = action.payload;\r\n\r\n            return {\r\n                ...state,\r\n                orders: orders,\r\n                total: total,\r\n                totalToday: totalToday\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    };\r\n};","import { combineReducers } from 'redux';\r\nimport { allIngredientsReducer } from './allIngredients';\r\nimport { constructorIngredientsReducer } from './constructorIngredients';\r\nimport { orderDataReducer } from './orderData';\r\nimport { authReducer } from './auth';\r\nimport { modalReducer } from './modal';\r\nimport { wsReducer } from './webSocket';\r\n\r\n\r\nexport const rootReducer = combineReducers({\r\n  allIngredients: allIngredientsReducer,\r\n  constructorIngredients: constructorIngredientsReducer,\r\n  orderData: orderDataReducer,\r\n  auth: authReducer,\r\n  modal: modalReducer,\r\n  ws: wsReducer\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\nimport { compose, createStore, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\nimport { rootReducer } from './services/reducers/index';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport {\r\n  WS_CONNECTION_OPEN,\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSE,\r\n  WS_CONNECTION_DISCONNECT,\r\n  WS_GET_MESSAGE,\r\n  WS_SEND_MESSAGE\r\n} from './services/actions/webSocket';\r\nimport { socketMiddleware } from './services/middleware/webSocketMiddleware';\r\nimport { WS_URL } from './utils/constants';\r\n\r\n\r\nconst wsActions = {\r\n  wsInit: WS_CONNECTION_OPEN,\r\n  wsOnOpen: WS_CONNECTION_SUCCESS,\r\n  wsOnError: WS_CONNECTION_ERROR,\r\n  wsOnClose: WS_CONNECTION_CLOSE,\r\n  wsDisconnect: WS_CONNECTION_DISCONNECT,\r\n  wsOnMessage: WS_GET_MESSAGE,\r\n  wsSendMessage: WS_SEND_MESSAGE\r\n}\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ && process.env.NODE_ENV !== 'development'\r\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\r\n    : compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware(WS_URL, wsActions)));\r\n\r\nconst store = createStore(rootReducer, enhancer);\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </BrowserRouter>\r\n  </React.StrictMode>\r\n  , document.getElementById('root'));\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OrderStats_container__2Q7cx\",\"ordersBoard\":\"OrderStats_ordersBoard__3LHG3\",\"groupList\":\"OrderStats_groupList__1vK3x\",\"list\":\"OrderStats_list__3E5e9\",\"listItem\":\"OrderStats_listItem__1XwVe\",\"orderDone\":\"OrderStats_orderDone__3dEM8\",\"groupTotal\":\"OrderStats_groupTotal__1PeR9\",\"glowText\":\"OrderStats_glowText__xFkhS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"OrderDetails_content__3N_Yv\",\"idContainer\":\"OrderDetails_idContainer__1Mic1\",\"ingredientsList\":\"OrderDetails_ingredientsList__3DpKD\",\"listItem\":\"OrderDetails_listItem__1ci0V\",\"groupIngredientIcoName\":\"OrderDetails_groupIngredientIcoName__2Pl0I\",\"footerContainer\":\"OrderDetails_footerContainer__2pBwZ\",\"container\":\"OrderDetails_container__n-mzU\",\"price\":\"OrderDetails_price__4KbTa\",\"addBox\":\"OrderDetails_addBox__QwEx0\",\"dateTimezoneOffset\":\"OrderDetails_dateTimezoneOffset__1_Fc8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppHeader_header__2kDb-\",\"content\":\"AppHeader_content__2lSFE\",\"list\":\"AppHeader_list__3uwvK\",\"link\":\"AppHeader_link__2tYFu\",\"activeLink\":\"AppHeader_activeLink__2G3o8\",\"personalCab\":\"AppHeader_personalCab__1-dbr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"BurgerIngredients_section__2mtVI\",\"tabs\":\"BurgerIngredients_tabs__2LCHb\",\"link\":\"BurgerIngredients_link__3EMND\",\"categoryList\":\"BurgerIngredients_categoryList__131xy\",\"ingredientsList\":\"BurgerIngredients_ingredientsList__2cO3v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"BurgerConstructor_section__2XV8S\",\"positionsList\":\"BurgerConstructor_positionsList__G2u-j\",\"hoveredList\":\"BurgerConstructor_hoveredList__2ClpB\",\"lockedPosition\":\"BurgerConstructor_lockedPosition__3kzwX\",\"chosenPositionsList\":\"BurgerConstructor_chosenPositionsList__2awgV\",\"chosenPositionsList_overflowY_scroll\":\"BurgerConstructor_chosenPositionsList_overflowY_scroll__XlYWU\",\"chosenPositionsList_overflowY_hidden\":\"BurgerConstructor_chosenPositionsList_overflowY_hidden__3-EWO\",\"infoGroup\":\"BurgerConstructor_infoGroup__30ORN\",\"priceGroup\":\"BurgerConstructor_priceGroup__k4w8S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navContainer\":\"Navigation_navContainer__3qxNp\",\"list\":\"Navigation_list__1SLxR\",\"listItem\":\"Navigation_listItem__IJIqN\",\"navigationLink\":\"Navigation_navigationLink__19DGK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Order_container__3Bk9c\",\"groupIdDate\":\"Order_groupIdDate__2rV4B\",\"dateTimezoneOffset\":\"Order_dateTimezoneOffset__1cMm9\",\"groupImagesPrice\":\"Order_groupImagesPrice__2HWwC\",\"groupPrice\":\"Order_groupPrice__1fFYq\",\"list\":\"Order_list__2Oyvr\",\"listItem\":\"Order_listItem__4YECP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"IngredientDetails_content__2RsBD\",\"image\":\"IngredientDetails_image__2nstq\",\"propertiesList\":\"IngredientDetails_propertiesList__25ZAh\",\"propertiesListItem\":\"IngredientDetails_propertiesListItem__wXSsB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"NotFoundPage_container__qKVUh\",\"h1\":\"NotFoundPage_h1__1EiWE\",\"p1\":\"NotFoundPage_p1__2JULo\",\"p2\":\"NotFoundPage_p2__DU1Xm\",\"navigationBlock\":\"NotFoundPage_navigationBlock___37Fg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Ingredient_content__3qUfQ\",\"image\":\"Ingredient_image__FjMKK\",\"priceGroup\":\"Ingredient_priceGroup__G5MbI\",\"link\":\"Ingredient_link__3NfbW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"commonStyles_main__oMSJr\",\"container\":\"commonStyles_container__2ej9f\",\"form\":\"commonStyles_form__2XqAd\",\"navigationBlock\":\"commonStyles_navigationBlock__1Nrzt\",\"navigationLink\":\"commonStyles_navigationLink__3tr0s\",\"navigationLinkActive\":\"commonStyles_navigationLinkActive__gIwtI\",\"statusDone\":\"commonStyles_statusDone__SA7_8\",\"statusCancelled\":\"commonStyles_statusCancelled__2GVBu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalContainer\":\"Modal_modalContainer__1rFo2\",\"titleButtonGroup\":\"Modal_titleButtonGroup__2zUJ1\",\"closeButton\":\"Modal_closeButton__2vdGs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconContainer\":\"IngredientIcon_iconContainer__2kGby\",\"image\":\"IngredientIcon_image__rqxJX\",\"overlay\":\"IngredientIcon_overlay__151uW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"OrderInfo_content__2YWa-\",\"header\":\"OrderInfo_header__3yJ96\",\"image\":\"OrderInfo_image__110wO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listItem\":\"BurgerConstructorItem_listItem__2Uu9M\",\"hoveredItem\":\"BurgerConstructorItem_hoveredItem__Ft_xq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ProfilePage_container__2AiNI\",\"profileContainer\":\"ProfilePage_profileContainer__nnZ6E\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OrdersPage_container__3nKpE\",\"ordersListContainer\":\"OrdersPage_ordersListContainer__X6ZJc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"OrdersList_list__3eWtT\",\"link\":\"OrdersList_link__1r7yi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FeedPage_container__29J7Y\",\"ordersListContainer\":\"FeedPage_ordersListContainer__2F9If\"};"],"sourceRoot":""}